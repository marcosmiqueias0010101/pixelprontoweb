!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="f8039b99-e06d-42f4-992b-2a6f5fef81ba",e._sentryDebugIdIdentifier="sentry-dbid-f8039b99-e06d-42f4-992b-2a6f5fef81ba")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41340],{37357:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(79342),l=t(10953),i=t(56691),n=t(97724),r=t(24429),o=t(84499),d=t(61312),c=t(72055),u=t(32171),m=t.n(u);t(88382);var f=t(65146);let x=()=>{let{t:e}=(0,f.Bd)(),{isSuperGrokUser:s,isSuperGrokProUser:t,isEnterpriseUser:u}=(0,r.Q2)(),x=(0,r.hd)(),{push:h}=(0,o.wK)();return(0,a.jsxs)("div",{className:(0,d.cn)("fixed z-50 bg-background grid inset-0 place-items-center gap-4 duration-200 w-[100vw] min-h-[100vh] overflow-x-hidden","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 p-6"),children:[(0,a.jsx)("meta",{name:"description",content:"Unlock advanced AI capabilities with SuperGrok. With SuperGrok you get signifcantly more access to our premium models and early access to new features."})," ",(0,a.jsx)("meta",{name:"keywords",content:"Grok, Supergrok, Subscription, xAI, AI, Models, Context, Images, Generation, Tools, Features"}),(0,a.jsx)(i.$n,{asChild:!0,variant:"secondary",size:"pill",className:"absolute top-8 z-10 h-10 pr-5",children:(0,a.jsxs)(m(),{href:"/",children:[(0,a.jsx)(c.JGc,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"-mt-px",children:e("Go to","Go to")}),(0,a.jsx)("div",{className:"-mx-0.5 -mt-px",children:(0,a.jsx)(l.r1,{className:"h-3"})})]})}),(0,a.jsx)(n.W,{isSubscribed:s||t||u||!1,isSuccessful:x,onSuccess:()=>h({page:"main"})})]})}},38245:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(79342),l=t(28503),i=t(10953),n=t(32171),r=t.n(n),o=t(65146);function d(){let{t:e}=(0,o.Bd)("base");return(0,a.jsxs)("div",{className:"w-full min-h-dvh flex flex-col items-center justify-center pt-4",children:[(0,a.jsx)("div",{className:"fixed bgGradient w-screen h-dvh -z-10"}),(0,a.jsx)(r(),{href:"/",className:"block focus:outline-none focus-visible:ring-1 focus-visible:ring-ring rounded-lg",children:(0,a.jsx)(i.r1,{height:20,width:60,className:"opacity-80 hover:opacity-100 fill-black dark:fill-white"})}),(0,a.jsx)(l.J,{title:e("pages.404.title","Page not found"),description:e("pages.404.description","There was an error loading this page. Please verify that you are using a correct URL or contact one of the admins if the issue persists."),cta:e("pages.404.home","Return to home")})]})}},41405:(e,s,t)=>{"use strict";function a(e){let s=["B","KB","MB","GB","TB"];if(0===e||e===BigInt(0))return"0.00 B";let t="bigint"==typeof e?Number(e):e;if("bigint"==typeof e&&e>BigInt(Number.MAX_SAFE_INTEGER)){let t=0,a=e;for(;a>=BigInt(1e3)&&t<s.length-1;)a/=BigInt(1e3),t++;return Number(a).toFixed(2)+" "+s[t]}let a=Math.floor(Math.log(t)/Math.log(1e3));return(t/Math.pow(1e3,a)).toFixed(2)+" "+s[a]}t.d(s,{z:()=>a})},56115:(e,s,t)=>{"use strict";t.d(s,{R:()=>l});var a=t(88382);let l=e=>{let{hasNextPage:s,isFetchingNextPage:t,isLoading:l,fetchNextPage:i}=e,n=(0,a.useRef)(null),r=(0,a.useRef)(null),[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(!(null==n?void 0:n.current)||!(null==r?void 0:r.current))return;let e=new IntersectionObserver(e=>{let[s]=e;s&&d(s.isIntersecting)},{root:r.current,rootMargin:"300px 0px 300px 0px",threshold:.1}),s=n.current;return e.observe(s),()=>{s&&e.unobserve(s)}},[]),(0,a.useLayoutEffect)(()=>{!o||!s||t||c||l||(u(!0),i())},[o,s,t,i,c,l]),(0,a.useEffect)(()=>{if(c){let e=setTimeout(()=>{u(!1)},300);return()=>clearTimeout(e)}},[c]),{loadMoreRef:n,historyContainerRef:r}}},62085:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>tb});var a=t(79342),l=t(98117),i=t(38614),n=t(38245),r=t(37357),o=t(63209),d=t(81745),c=t(42557),u=t(35692),m=t(56691),f=t(43086),x=t(46748),h=t(75500),p=t(23232),g=t(41320),v=t(2280),j=t(27636),b=t(84499),y=t(61312),w=t(97196),N=t(73304),k=t(13511),I=t(72055),C=t(35589),S=t(84969),E=t(16506),z=t(39116),R=t(74995),A=t(88382),_=t(65146);function P(e){let{children:s,numOfLines:t,...l}=e;return(0,a.jsx)("p",{style:{display:"-webkit-box",WebkitLineClamp:t,WebkitBoxOrient:"vertical",overflow:"hidden"},...l,children:s})}var M=t(18921);function T(e){let{task:s,onClick:t}=e,l=(0,p._)(),{getScheduleLabel:i}=(0,j.Ay)(),n=(0,N.d)(R.A("setCreateDialogIsOpen")),r=(0,N.d)(R.A("setTaskToEdit")),o=(0,A.useCallback)(()=>{l("task_preset_clicked",void 0,{location:"task-presets:handleClick"}),n(!0),r(s),null==t||t()},[t,n,r,l,s]),d=(0,M.O$)(s),c=(0,A.useMemo)(()=>{var e,s;if(d)return i(d.cadence,d.timeOfDay,d.ianaTimezone,d.localDayOfWeek,d.localDayOfMonth,null!=(s=null==(e=d.localDayOfYear)?void 0:e.toISODate())?s:void 0)},[i,d]),{resolvedTheme:u}=(0,E.D)();return(0,a.jsxs)("div",{className:(0,y.cn)("group h-40 grow w-full rounded-2xl pt-4 px-4 flex flex-col items-center gap-3 border cursor-pointer bg-surface-l1 hover:bg-surface-l2",{"hover:bg-surface-base":"light"===u}),onClick:o,children:[(0,a.jsx)("h1",{className:"font-semibold text-sm",children:s.cta||s.name}),(0,a.jsxs)("div",{className:"grow w-full rounded-t-xl border bg-surface-l2 overflow-hidden p-3 group-hover:bg-surface-l3",children:[(0,a.jsx)(P,{className:"text-xs text-fg-secondary font-normal mb-2",numOfLines:2,children:s.prompt}),(0,a.jsx)("p",{className:"text-xs font-normal",children:c})]})]})}var D=t(45471);function B(){let e=(0,h.h)(),{t:s}=(0,_.Bd)("tasks"),t=(0,p._)(),l=(0,g.Di)(),i=(0,N.d)(R.A("setSelectedTaskIdForSidePanel")),n=(0,N.d)(R.A("setTaskPageTabMode")),r=(0,N.d)(R.A("setCreateDialogIsOpen")),{route:u,replace:w}=(0,b.wK)(),k="tasks"===u.page&&u.taskId||null,S="tasks"===u.page&&u.tab||null;(0,A.useEffect)(()=>{k&&i(k),S&&n("active"===S?M.RJ.ACTIVE:M.RJ.ARCHIVED),w({page:"tasks",taskId:null,tab:null})},[k,S,i,n,w]);let[E,P]=(0,A.useState)({}),B=(0,N.d)(R.A("taskPageTabMode")),{taskPresets:U}=(0,j.hB)(),{getUserTasksQuery:L,getInactiveUserTasksQuery:W}=(0,j.y$)({fetchActive:B===M.RJ.ACTIVE,fetchInactive:B===M.RJ.ARCHIVED}),{isLoading:H,data:V,refetch:$,isRefetching:K}=L,{isLoading:q,data:X,refetch:Q,isRefetching:J}=W,Y=(0,A.useCallback)((e,s)=>{P(t=>({...t,[e]:s}))},[P]);(0,A.useEffect)(()=>{let e=s("tasks-page-document-title","Tasks");document.title="".concat(e," - Grok")},[s]),(0,x.r)(s("tasks-page-document-title","Tasks")),(0,A.useEffect)(()=>{t("opened_tasks_page",void 0,{location:"tasks-page:useEffect"})},[t]);let Z=!!(0,c.wV)().user,ee=e.ENABLE_GROK_TASKS&&Z,es=B===M.RJ.ARCHIVED?q:H,et=B===M.RJ.ARCHIVED?J:K,ea=(0,A.useRef)(null),[el,ei]=(0,A.useState)(!0),[en,er]=(0,A.useState)(!1);(0,A.useEffect)(()=>{let e=()=>{if(ea.current){let{scrollTop:e,scrollHeight:s,clientHeight:t}=ea.current;0===e?ei(!0):ei(!1),e+t>=s-5?er(!0):er(!1)}},s=ea.current;return s&&s.addEventListener("scroll",e),()=>{s&&s.removeEventListener("scroll",e)}},[ea,es]);let eo=(0,A.useCallback)(async()=>B===M.RJ.ARCHIVED?Q():$(),[$,Q,B]),ed=(0,A.useMemo)(()=>B===M.RJ.ARCHIVED?null==X?void 0:X.tasks:null==V?void 0:V.tasks,[null==X?void 0:X.tasks,null==V?void 0:V.tasks,B]),ec=(0,A.useCallback)(async()=>{t("refresh_tasks_clicked",void 0,{location:"tasks-page:handleRefreshClick"}),eo().catch(e=>D.z.error(e))},[eo,t]),eu=(0,A.useCallback)(()=>{t("clicked_add_new_task",void 0,{location:"tasks-page"}),r(!0)},[r,t]),em=(0,A.useMemo)(()=>{if(!ed)return[];if(B===M.RJ.ACTIVE){var e;return e=ed.filter(e=>{var s;return null==(s=e.task)?void 0:s.isActive}),e.sort((e,s)=>{var t,a,l,i;let n=E[null!=(l=null==(t=e.task)?void 0:t.taskId)?l:""],r=E[null!=(i=null==(a=s.task)?void 0:a.taskId)?i:""];return n&&r?C.c9.fromISO(r).diff(C.c9.fromISO(n)).toMillis():n?-1:1*!!r})}return B===M.RJ.ARCHIVED?ed.filter(e=>{var s;return!(null==(s=e.task)?void 0:s.isActive)}):[]},[ed,B,E]);(0,A.useEffect)(()=>()=>{i(void 0)},[]);let ef=(0,A.useMemo)(()=>U.sort(()=>Math.random()-.5).slice(0,2),[U]);if(!ee)return(0,z.redirect)("/");let ex=B===M.RJ.ACTIVE&&em.length<=3;return(0,a.jsxs)("div",{className:(0,y.cn)("h-dvh w-full relative selection:bg-highlight",{"overflow-y-auto":l}),children:[(0,a.jsx)(o.hx,{hideIncognito:!0}),(0,a.jsx)(d.CommandMenu,{}),(0,a.jsxs)("div",{className:"max-w-[50rem] px-2 pt-16 @sm:pt-18 mx-auto w-full flex flex-col h-full items-center pb-4",style:en?{}:{maskImage:v.pA,WebkitMaskImage:v.pA},children:[(0,a.jsx)("div",{className:"flex justify-between align-center mt-6 min-h-[42px] w-full",children:(0,a.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 group",children:[(0,a.jsx)("h1",{className:"text-2xl flex gap-2 items-center font-semibold",children:s("tasks.page-title","Tasks")}),(0,a.jsx)(m.$n,{size:"iconSm",variant:"ghost",disabled:es||et,onClick:ec,className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,a.jsx)(I.e9t,{size:14,"aria-label":s("task-results.refresh","refresh task results")})})]}),(0,a.jsxs)(m.$n,{variant:"outline",onClick:eu,size:"md",children:[(0,a.jsx)(I.FWt,{size:16}),(0,a.jsx)("span",{children:s("tasks.create","Add new")})]})]})}),es?(0,a.jsx)("div",{className:"grow shrink self-stretch flex items-center justify-center",children:(0,a.jsx)(f.y,{size:"sm"})}):(0,a.jsxs)("div",{className:"pt-6 w-full overflow-auto relative no-scrollbar",style:el?{}:{maskImage:v.l1,WebkitMaskImage:v.l1},ref:ea,children:[0===em.length&&B===M.RJ.ACTIVE&&(0,a.jsx)(O,{onClick:eu}),0===em.length&&B===M.RJ.ARCHIVED&&(0,a.jsx)(G,{}),(0,a.jsxs)("div",{className:(0,y.cn)("flex flex-col gap-4 pb-4 w-full "),children:[em.length>0&&em.filter(e=>!!e.task).map(e=>{if(e.task){var s;return(0,a.jsx)(F,{task:e,updateTaskIdIsUnread:Y},null==(s=e.task)?void 0:s.taskId)}}),ex?(0,a.jsx)("div",{className:(0,y.cn)("pt-4 flex items-center pb-20",{"flex-col pb-8":l}),children:(0,a.jsx)("div",{className:(0,y.cn)("flex w-full gap-4",{"flex-col":l}),children:ef.map((e,s)=>(0,a.jsx)(T,{task:e},s))})}):null]})]})]})]})}function F(e){var s,t,l,i,n,r,o,d,c;let{task:u,updateTaskIdIsUnread:m}=e,{t:f}=(0,_.Bd)("tasks"),{getNextRunLabel:x}=(0,j.Ay)(),v=(0,p._)(),{resolvedTheme:b}=(0,E.D)(),C=(0,g.Di)(),z=(0,N.d)(R.A("selectedTaskIdForSidePanel")),P=(0,N.d)(R.A("setSelectedTaskIdForSidePanel")),M=z===(null==(s=u.task)?void 0:s.taskId),T=(0,h.h)(),D=(0,A.useCallback)(()=>{var e;if(v("clicked_tasks_card",void 0,{location:"tasks-page:handleClick"}),M)return P(void 0);P(null==(e=u.task)?void 0:e.taskId)},[M,P,v,null==(t=u.task)?void 0:t.taskId]),B=null==(l=u.schedules)?void 0:l.at(0),{data:F}=(0,k.IT)({queryKey:["latest-task-result",null==(i=u.task)?void 0:i.taskId],queryFn:async()=>{var e;if(!(null==(e=u.task)?void 0:e.taskId))throw Error("TaskId is required");return w.Cs.grokTasksGetLatestUnreadTaskResult({taskId:u.task.taskId})},enabled:T.ENABLE_GROK_TASKS&&!!(null==(n=u.task)?void 0:n.taskId),staleTime:0,refetchOnMount:"always"}),O=null==F||null==(r=F.results)?void 0:r.at(0),G=!(null==(o=u.task)?void 0:o.isActive),L=!!(O&&!O.isRead&&!G),W=null==O?void 0:O.createTime;if((0,A.useEffect)(()=>{var e,s;m(null!=(s=null==(e=u.task)?void 0:e.taskId)?s:"",W)},[m,null==(d=u.task)?void 0:d.taskId,W]),!u.task||!B)return null;let H=!!((null==(c=u.task)?void 0:c.isActive)&&B.isEnabled);return(0,a.jsxs)("div",{className:(0,y.cn)("w-full flex flex-col py-0 rounded-3xl border bg-surface-l1 hover:bg-surface-l2 cursor-pointer  relative",{"hover:bg-surface-base":"light"===b},{"bg-surface-l2 hover:bg-surface-l3":M},{"bg-surface-inset hover:bg-button-ghost-hover":M&&"light"===b}),onClick:D,children:[(0,a.jsxs)("div",{className:"flex flex-col px-4 py-3 gap-0.5",children:[(0,a.jsx)("div",{className:"flex flex-row items-center ",children:(0,a.jsx)("h1",{className:(0,y.cn)("text-sm font-semibold w-full",{"text-xs":C}),children:u.task.name&&u.task.name.length>0?u.task.name:"Task"})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:(0,y.cn)("flex items-center gap-1.5 text-sm font-medium text-fg-secondary",{"text-yellow-300":!H&&!G,"text-xs":C}),children:[G?(0,a.jsx)(I.Tde,{size:13}):H?(0,a.jsx)(I.zD7,{size:13,className:"text-fg-positive"}):(0,a.jsx)(I.EDi,{size:13}),G?f("task-card.archived","Archived"):H?f("task-card.scheduled","Scheduled"):f("task-card.not-scheduled","Paused")]}),(0,a.jsx)("p",{className:(0,y.cn)("text-sm text-fg-secondary font-normal",{"text-xs":C}),children:H&&B.nextRun&&B.taskCadence&&"".concat(f("task-cadence.next-run","Next Run:")," ").concat(x(B.nextRun,B.isCompleted))})]})]}),(0,a.jsx)(S.N,{children:!C&&L&&O&&(0,a.jsx)("div",{className:"border-t-[0.5px]",children:(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(U,{taskResult:O})})})})]})}function U(e){var s;let{taskResult:t}=e,{t:l}=(0,_.Bd)("tasks"),i=(0,p._)(),{push:n}=(0,b.wK)(),r=(0,g.Di)(),o=(0,A.useCallback)(e=>{i("clicked_latest_unread_in_tasks_card",void 0,{location:"tasks-page:UnreadResult"}),(null==t?void 0:t.conversationId)&&(e.stopPropagation(),n({page:"chat",conversationId:null==t?void 0:t.conversationId,temporary:!1}))},[n,i,t]),d=(0,A.useMemo)(()=>{var e;if(!t.createTime)return null;let s=C.c9.fromISO(t.createTime),a=C.c9.now();return null!=(e=s.toRelative({base:a}))?e:l("just-now","Just now")},[l,t.createTime]);return(0,a.jsxs)(m.gx,{variant:"text",className:(0,y.cn)("px-4 ps-5 py-3 cursor-pointer hover:bg-button-ghost-hover  rounded-none rounded-b-3xl  flex items-center justify-between w-full text-sm flex-wrap h-full",{"flex-col items-start p-3":r}),onClick:o,tooltipContent:l("task-card.goto-last-chat-unread","Go to latest unread chat"),tooltipContentProps:{side:"bottom"},children:[(0,a.jsxs)("div",{className:(0,y.cn)("flex items-center gap-2.5",{"justify-between w-full":r}),children:[!r&&(0,a.jsx)(u.x,{variant:"sm"}),(0,a.jsx)("p",{className:"text-fg-secondary",children:null!=(s=t.title)?s:l("new-task-result-label","New task result")}),r&&(0,a.jsx)(u.x,{variant:"sm"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-fg-secondary",children:[(0,a.jsx)("p",{className:(0,y.cn)({"text-xs":r}),children:d}),!r&&(0,a.jsx)(I.oFn,{size:14})]})]})}let O=e=>{let{onClick:s}=e,{t}=(0,_.Bd)("tasks");return(0,a.jsxs)("div",{className:"w-full py-8 border rounded-xl flex flex-col items-center gap-4 px-4",children:[(0,a.jsx)(m.$n,{size:"iconMd",variant:"secondary",className:"rounded-full",onClick:s,"aria-label":t("tasks.create","Add new"),children:(0,a.jsx)(I.shx,{size:20})}),(0,a.jsxs)("div",{className:"flex flex-col items-center w-full gap-2 text-lg font-semibold",children:[(0,a.jsx)("h1",{children:t("no-tasks-banner.title","Get started by adding a task")}),(0,a.jsx)("p",{className:"text-xs font-normal text-fg-secondary text-center leading-1",children:t("no-tasks-banner.subtitle","Schedule a task to automate actions and get reminders when they complete.")})]})]})},G=()=>{let{t:e}=(0,_.Bd)("tasks");return(0,a.jsxs)("div",{className:"w-full py-8 border rounded-xl flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-center rounded-full bg-surface-l1 p-4",children:(0,a.jsx)(I.Tde,{size:20})}),(0,a.jsxs)("div",{className:"flex flex-col items-center w-full gap-2 text-lg font-semibold",children:[(0,a.jsx)("h1",{children:e("no-archived-tasks-banner.title","No archived tasks")}),(0,a.jsx)("p",{className:"text-xs font-normal text-fg-secondary text-center leading-1",children:e("no-archived=tasks-banner.subtitle","Archived tasks will show up here")})]})]})};var L=t(5790);let W=e=>{let{anchor:s,children:t}=e;return(0,a.jsxs)("h2",{id:s,children:[t,(0,a.jsx)("a",{href:"#".concat(s),className:"ms-2 inline-block opacity-50 hover:opacity-100 transition-opacity",children:(0,a.jsx)(I.qYV,{className:"w-4 h-4"})})]})},H=(0,A.memo)(function(){let e=(0,L.iV)(e=>e.setTab),s=(0,L.iV)(e=>e.toggleOpen);return(0,a.jsxs)("div",{className:"h-dvh flex-1 overflow-auto relative",children:[(0,a.jsx)("div",{className:"sm:hidden mt-2",children:(0,a.jsx)(o.n9,{shared:!1})}),(0,a.jsxs)("div",{className:"prose pb-8 px-4 mx-auto pt-2 sm:pt-8",children:[(0,a.jsx)("header",{children:(0,a.jsx)("h1",{children:"Grok Web FAQ"})}),(0,a.jsxs)("main",{children:[(0,a.jsxs)("p",{children:["Welcome to the Grok Web FAQ page! Grok is designed to be a helpful, witty, and maximally truthful assistant, inspired by the Hitchhiker's Guide to the Galaxy and JARVIS from Iron Man. This FAQ focuses on Grok's Web features, capabilities, and how to make the most of them. For legal terms, privacy, or account issues, visit"," ",(0,a.jsx)("a",{href:"https://x.ai/legal",target:"_blank",rel:"noreferrer noopener",children:"x.ai/legal"}),"."]}),(0,a.jsxs)("p",{children:["If your question isn't covered here, feel free to"," ",(0,a.jsx)(b.N_,{route:{page:"main"},children:"ask Grok directly"}),"."]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(W,{anchor:"what-is-grok",children:"What is Grok?"}),(0,a.jsx)("p",{children:"Grok is a conversational generative AI powered by xAI's state-of-the-art Large Language Models. It's built to assist with a wide range of tasks while being helpful, entertaining, and truthful. Grok aims to answer questions about the universe, help with deep work, and provide real-time insights, all with a touch of humor and personality."})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(W,{anchor:"key-features",children:"What are Grok's key features?"}),(0,a.jsx)("p",{children:"Grok offers a variety of powerful features, including:"}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Natural Language Processing and Question Answering"}),": Handles text and voice queries for accurate, context-aware responses."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Real-Time Search and Information Retrieval"}),": Searches public X posts (formerly Twitter) and the web in real-time for up-to-date information."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Creative Writing and Content Generation"}),": Assists with writing stories, articles, or other creative content."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Image Generation and Editing"}),": Creates and edits images based on your descriptions."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Image and Video Understanding"}),": Analyzes uploaded images or videos to provide insights or descriptions."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Coding Assistance"}),": Helps write, debug, and explain code."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Document Analysis"}),": Upload documents for summarization, analysis, or extraction of key information."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Personas and Customization"}),": Choose fun personas (e.g., witty, unhinged, or role-playing like a wizard) to customize Grok's tone and style."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Native Tool Use"}),": Integrates tools like code interpreters and internet access to query missing context and adjust responses dynamically."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Multilingual Capabilities"}),": Supports multiple languages with high precision."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Private Chat Mode"}),": Activate for conversations that aren't saved long-term, ensuring privacy for sensitive discussions."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Conversation History"}),": View and manage past chats for continuity."]})]}),(0,a.jsx)("p",{children:'Grok stands out for its real-time capabilities, reasoning agents, and focus on being a "trusted assistant for deep work."'})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(W,{anchor:"models",children:"What models power Grok, and what are their features?"}),(0,a.jsx)("p",{children:"Grok is powered by advanced models from xAI, each with unique strengths:"}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Grok 4"}),": The most intelligent model in the world, featuring native tool use, real-time search integration, and superior reasoning. Available to SuperGrok and Premium+ subscribers."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Grok 4 Heavy"}),": The most powerful version of Grok 4, offering enhanced performance and higher rate limits. Accessible through the SuperGrok Heavy subscription tier."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Grok 3"}),": Fast model that combines reasoning with extensive pretraining knowledge. It includes code interpreters, internet access, and the ability to dynamically adjust approaches for complex tasks."]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(W,{anchor:"creative-tasks",children:"Can Grok handle creative or specialized tasks?"}),(0,a.jsx)("p",{children:"Yes! Grok excels at:"}),(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[(0,a.jsx)(b.N_,{route:{page:"files"},children:"Generating rich documents, stories, or reports"}),"."]}),(0,a.jsx)("li",{children:"Writing and debugging code in various languages."}),(0,a.jsxs)("li",{children:[(0,a.jsx)(b.N_,{route:{page:"files",emptyView:"image"},children:'Creating/editing images (e.g., via prompts like "generate a cosmic landscape")'}),"."]}),(0,a.jsx)("li",{children:"Analyzing images for descriptions, insights, or edits."}),(0,a.jsx)("li",{children:'Role-playing or adopting personas for fun interactions (e.g., "Respond as a pirate captain").'})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(W,{anchor:"real-time-search",children:"Does Grok have real-time search and how does it work?"}),(0,a.jsx)("p",{children:"Yes, Grok has the most advanced real-time search capabilities. It can:"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"Search public X posts for the latest discussions."}),(0,a.jsx)("li",{children:"Perform web searches for current information."}),(0,a.jsx)("li",{children:"Integrate results into responses for up-to-date, accurate answers."})]}),(0,a.jsx)("p",{children:"This is powered by models like Grok 4, ensuring responses are timely and relevant."})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(W,{anchor:"customize-responses",children:"Can I customize Grok's responses?"}),(0,a.jsxs)("p",{children:["Absolutely. You can choose one of predefined styles or write your own instructions in"," ",(0,a.jsx)("a",{onClick:t=>{t.preventDefault(),s(),e("personality")},className:"cursor-pointer",children:"settings"}),"."]})]}),(0,a.jsxs)("section",{children:[(0,a.jsx)(W,{anchor:"mistakes-inaccuracies",children:"How does Grok handle mistakes or inaccuracies?"}),(0,a.jsx)("p",{children:'Like all AIs, Grok may occasionally "hallucinate" or provide incorrect info based on its training data. It encourages users to verify facts, and you can provide feedback to help improve it. Grok\'s design prioritizes truthfulness to minimize this.'})]}),(0,a.jsxs)("p",{children:["If you have more questions, ",(0,a.jsx)(b.N_,{route:{page:"main"},children:"chat with Grok now! \uD83D\uDE80"})]})]})]})]})});var V=t(51375),$=t(37469),K=t(65761),q=t(41405),X=t(87891),Q=t(33846);let J=(0,A.memo)(e=>{let{asset:s,isFileSelected:t}=e,{t:l}=(0,_.Bd)(),n=(0,p._)(),r=(0,i.aP)(R.A("setSidePanelContent")),[o,d]=(0,A.useState)(!1),c=(0,X.R)(e=>e.deleteAsset),u=(0,A.useCallback)(()=>{if(t)return void r(void 0);r({type:"asset",data:(0,$.B)(s),hideEdit:!0})},[s,t,r]),f=(0,A.useCallback)(e=>{var t,a;e.stopPropagation(),c(s.assetId),n("delete_asset","asset_row",{location:"asset-row",assetId:s.assetId,assetName:s.name,assetSize:null!=(a=null==(t=s.sizeBytes)?void 0:t.toString())?a:"unknown",assetType:s.mimeType})},[s,c,n]);return(0,a.jsxs)(Q.P.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:(0,y.cn)("flex flex-shrink-0 items-center gap-4 p-2 border rounded-xl bg-card hover:bg-card-hover cursor-pointer focus:bg-card-hover focus:outline-none mb-2 overflow-x-hidden",t&&"bg-card-hover"),tabIndex:0,onClick:u,children:[(0,a.jsx)(V.E,{metadata:(0,$.B)(s),className:"rounded-lg w-12 h-12 ms-0 me-0 [&>img]:h-full [&>img]:w-full"}),(0,a.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,a.jsx)("span",{className:"line-clamp-1 break-all",children:s.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 line-clamp-1 break-all",children:[(0,a.jsx)("span",{children:s.sizeBytes?(0,q.z)(s.sizeBytes):l("file-browser.unknown-size","Unknown")}),(0,a.jsx)("span",{children:" • "}),(0,a.jsx)("span",{children:s.createTime?(0,K.P)(s.createTime):""}),(0,a.jsx)("span",{children:" • "}),(0,a.jsx)("span",{children:s.mimeType})]})]}),o?(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)(m.gx,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),d(!1)},tooltipContent:l("Cancel","Cancel"),"aria-label":l("Cancel","Cancel"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(I.X,{size:16})}),(0,a.jsx)(m.gx,{variant:"ghost",size:"sm",btnColor:"danger",onClick:f,tooltipContent:l("Confirm","Confirm"),"aria-label":l("Confirm","Confirm"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(I.TBR,{size:16})})]}):(0,a.jsx)(m.gx,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),d(!0)},tooltipContent:l("Delete","Delete"),"aria-label":l("Delete","Delete"),className:"flex items-center gap-3 size-8 rounded-md",children:(0,a.jsx)(I.TBR,{size:16})})]},s.assetId)});var Y=t(28503),Z=t(54344),ee=t(55881),es=t(73772),et=t(74933),ea=t(48589),el=t(40873),ei=t(56115),en=t(17703);let er=()=>{let{route:e}=(0,b.wK)(),s=(0,X.R)(e=>e.loadFirstPage),t=(0,X.R)(e=>e.loadNextPage),a=(0,X.R)(e=>e.listPageToken),l=(0,X.R)(e=>e.listStatus),i=(0,X.Z0)();(0,A.useEffect)(()=>{s({sort:"files"===e.page?e.sort:"used",search:"files"===e.page?e.search:void 0})},[s,e]);let{loadMoreRef:n,historyContainerRef:r}=(0,ei.R)({hasNextPage:!!a,isFetchingNextPage:"loading"===l,isLoading:"loading"===l,fetchNextPage:()=>{t().catch(e=>(0,en.vV)("files-load-more",e))}});return{assets:i,isLoading:"loading"===l,hasError:"error"===l,refetch:s,loadMoreRef:n,historyContainerRef:r}},eo=[{label:(0,a.jsx)(_.x6,{ns:"base",i18nKey:"file-browser.sort.size",defaults:"Size"}),value:"size"},{label:(0,a.jsx)(_.x6,{ns:"base",i18nKey:"file-browser.sort.name",defaults:"Name"}),value:"name"},{label:(0,a.jsx)(_.x6,{ns:"base",i18nKey:"file-browser.sort.created-time",defaults:"Created Time"}),value:"created"},{label:(0,a.jsx)(_.x6,{ns:"base",i18nKey:"file-browser.sort.last-used-time",defaults:"Last Used Time"}),value:"used"}];function ed(){let{t:e}=(0,_.Bd)("base"),{user:s}=(0,ee.useSession)(),{push:t,replace:l,route:n}=(0,b.wK)(),r="files"===n.page?n:(0,el.Z)("only for /files"),[c,u]=(0,A.useState)(""),f=r.sort||"used",x=(0,g.Di)(),h=(0,ea.o)(c,500);(0,A.useEffect)(()=>{l({...r,search:h})},[h,l,r]);let p=e=>{t({...r,sort:e})},v=(0,i.aP)(e=>{var s;return(null==(s=e.sidePanelContent)?void 0:s.type)!=="asset"?null:e.sidePanelContent.data.fileMetadataId}),{assets:j,isLoading:w,hasError:N,refetch:k,loadMoreRef:C,historyContainerRef:E}=er();return s?(0,a.jsxs)("main",{className:(0,y.cn)("h-dvh w-full relative flex flex-col items-center"),children:[(0,a.jsx)(o.hx,{hideIncognito:!0}),(0,a.jsx)(d.CommandMenu,{}),(0,a.jsxs)("div",{className:"max-w-[50rem] px-2 pt-16 pb-8 @sm:pt-18 mx-auto w-full flex flex-col h-full",ref:E,children:[(0,a.jsx)("h1",{className:(0,y.cn)("text-2xl flex gap-2 items-center pb-4 font-semibold",x&&"ps-3"),children:e("Files","Files")}),(0,a.jsxs)("div",{className:"flex gap-2 items-center justify-between w-full pb-2",children:[(0,a.jsx)(et.p,{value:c,onChange:e=>u(e.target.value),placeholder:e("file-browser.filter.placeholder","Search files..."),className:"text-primary bg-surface-l1 border-border-l1 h-10 rounded-xl"}),(0,a.jsxs)(es.rI,{children:[(0,a.jsx)(es.ty,{asChild:!0,children:(0,a.jsxs)(m.$n,{variant:"outline",className:"h-10 rounded-xl",children:[(0,a.jsx)(I.ufo,{size:15,className:"text-fg-secondary"}),e("files-sort-show-menu","Sort"),(0,a.jsx)(I.D3D,{className:"text-fg-secondary",size:14})]})}),(0,a.jsx)(es.SQ,{children:eo.map(e=>(0,a.jsxs)(es._2,{className:"gap-2",onClick:()=>p(e.value),children:[e.label,f===e.value&&(0,a.jsx)("span",{className:"ms-auto text-xs text-primary",children:(0,a.jsx)(I.Srz,{size:16,className:"text-primary"})})]},e.value))})]})]}),(0,a.jsxs)(Z.D,{children:[(0,a.jsxs)(S.N,{children:[null==j?void 0:j.map(e=>(0,a.jsx)(J,{isFileSelected:e.assetId===v,asset:e},e.assetId)),(null==j?void 0:j.length)===0&&!w&&(0,a.jsx)(Q.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsx)("div",{className:"text-center",children:e("file-browser.no-files-found","No files found")})},"no-files-found"),w&&(0,a.jsx)("div",{className:"flex justify-center items-center w-full h-full max-h-[150px]",children:(0,a.jsx)(Q.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(I.krw,{className:"animate-spin"})})})},"files-loading"),N&&(0,a.jsxs)("div",{className:"flex justify-center items-center w-full h-full max-h-[150px] flex-col gap-4",children:[(0,a.jsx)("div",{className:"text-center",children:e("file-browser.error.description","There was an issue loading your files")}),(0,a.jsx)(m.$n,{variant:"filledSecondary",onClick:()=>k(),children:e("Retry","Retry")})]},"files-error")]}),(0,a.jsx)("div",{ref:C})]})]})]}):(0,a.jsx)("main",{className:(0,y.cn)("w-screen h-dvh relative"),children:(0,a.jsx)(Y.J,{title:e("Error","Error"),description:e("file-browser.error.anonymous-user","You must be logged in to access this page"),cta:e("Go Home","Go Home")})})}var ec=t(92437),eu=t(14908);function em(e){let{className:s}=e,{t}=(0,_.Bd)("files"),l=(0,A.useRef)(null),i=(0,X.R)(e=>e.uploadAsset),{push:n}=(0,b.wK)(),r=(0,A.useCallback)((e,s)=>{let a=s.items;if(!a||0===a.length||!("webkitGetAsEntry"in a[0]))return void e.forEach(e=>i(e));let l=e=>{".DS_Store"!==e.name&&i(e,e=>n({page:"files",fileId:e}))},r=e=>{(0,en.vV)("explorer-drop-zone:file-upload",e),eu.oR.error(t("files-extract-error","Error when processing file"))};for(let e=0;e<a.length;e++){let s=a[e].webkitGetAsEntry();s&&function e(s,t,a){s.isFile?s.file(t,a):s.isDirectory&&s.createReader().readEntries(s=>{for(let l of s)e(l,t,a)},a)}(s,l,r)}},[t,i,n]),o=(0,ec.t)({ref:l,onDrop:r});return(0,a.jsx)(ec.u,{ref:l,dragState:o,title:t("explorer-dropzone.title","Drop files to upload"),className:s})}var ef=t(41284),ex=t(17014),eh=t(86565);let ep=(0,A.memo)(e=>{let{children:s}=e,{t}=(0,_.Bd)("files"),l=(0,X.R)(e=>e.createAsset),i=(0,p._)(),{push:n}=(0,b.wK)(),r=(0,eh.KR)(),{ENABLE_IMAGE_EDITOR_IN_FILES:o,ENABLE_XLSX_EDITING:d}=(0,h.h)(),c=(0,A.useRef)(null),u=(0,X.R)(e=>e.uploadAsset),f=(0,A.useCallback)(e=>n({page:"files",fileId:e}),[n]),x=(0,A.useCallback)(e=>{l(e,f),i("files.create-file",e,{location:"AddFileButton:handleCreate"})},[l,f,i]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(es.rI,{children:[(0,a.jsx)(es.ty,{asChild:!0,children:s||(0,a.jsxs)(m.$n,{variant:"filledSecondary",size:"iconSm",rounded:!0,className:"flex-shrink-0",children:[(0,a.jsx)(I.FWt,{size:"18"}),(0,a.jsx)("span",{className:"sr-only",children:t("files-add-button.label","Add new file")})]})}),(0,a.jsxs)(es.SQ,{align:"start",alignOffset:-8,sideOffset:8,className:"min-w-40",children:[(0,a.jsx)(eg,{fileTypeId:"markdown",onSelect:x}),d&&(0,a.jsxs)(es._2,{onSelect:()=>{x(r.spreadsheet.newFileName)},children:[(0,A.createElement)(r.spreadsheet.Icon,{className:"me-2 text-secondary",size:16}),r.spreadsheet.name]}),o&&(0,a.jsxs)(es._2,{onSelect:()=>n({page:"files",fileId:null,emptyView:"image"}),children:[(0,a.jsx)(I.XGR,{size:16,className:"me-2 text-secondary"}),t("files-add-image","Image")]}),(0,a.jsxs)(es.lv,{children:[(0,a.jsxs)(es.nV,{children:[(0,a.jsx)(I.bvm,{size:16,className:"me-2 text-secondary"}),t("files-add-code","Code")]}),(0,a.jsx)(es.dc,{children:(0,a.jsx)(es.M5,{sideOffset:12,alignOffset:-4,className:"min-w-36",children:eh.cC.map(e=>(0,a.jsx)(eg,{fileTypeId:e,disableIcons:!0,onSelect:x},e))})})]}),(0,a.jsx)(es.mB,{className:"bg-border-l1 mx-2"}),(0,a.jsxs)(es._2,{onSelect:()=>{c.current&&c.current.click()},children:[(0,a.jsx)(I.sjq,{size:16,className:"me-2 text-secondary"}),t("files-menu-upload.label","Upload Files")]})]})]}),(0,a.jsx)("input",{type:"file",ref:c,className:"hidden",onChange:e=>{e.target.files&&(Array.from(e.target.files).forEach(e=>{u(e,f)}),e.target.value="")},multiple:!0})]})});function eg(e){let{fileTypeId:s,onSelect:t,disableIcons:l}=e,{Icon:i,name:n,newFileName:r}=(0,eh.KR)()[s];return(0,a.jsxs)(es._2,{onSelect:()=>t(r),children:[l?null:(0,a.jsx)(i,{size:16,className:"me-2 text-secondary"}),n]})}function ev(e){let{className:s,onClose:t,onBlur:l,...i}=e,{t:n}=(0,_.Bd)("files"),r=(0,y.cn)("rounded-full shadow-none border border-border ps-9 h-8 focus:ring-0",s),o=(0,A.useCallback)(e=>{null==l||l(e),""===e.target.value&&(null==t||t())},[l,t]);return(0,a.jsxs)("div",{className:"relative flex flex-1",children:[(0,a.jsx)(I.vji,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:16}),(0,a.jsx)(et.p,{placeholder:n("files-search-input.placeholder","Search"),className:r,onBlur:o,...i})]})}function ej(){var e,s;let{t}=(0,_.Bd)("files"),l=(0,b.wK)(),{push:i,replace:n}=l,r="files"===l.route.page?l.route:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";throw Error(e)}("Only use Header in /files"),o=(0,c.wV)(),[d,u]=(0,A.useState)(null!=(e=r.search)?e:""),[f,x]=(0,A.useState)(null!=(s=r.search)&&s),[h,p]=(0,A.useState)(!1),g=(0,ea.o)(d,500);(0,A.useEffect)(()=>{n({page:"files",search:g})},[g,n]),(0,A.useEffect)(()=>{r.search||(p(!1),u(""))},[r.search]);let v=e=>{e.stopPropagation(),e.preventDefault(),p(!1),u(""),i({page:"files",sort:null,createdBy:null,fileType:null,search:""})},j="files"===r.page&&r.sort||null,w=e=>{i({page:"files",sort:e})},N="files"===r.page&&r.createdBy||null,k=e=>{i({page:"files",createdBy:e})},C="files"===r.page&&r.fileType||null,E=e=>{i({page:"files",fileType:e})},z=()=>{u(""),x(!1)},R=(0,A.useMemo)(()=>[{label:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ef.e,{className:"w-6 h-6",textClassName:"!text-[10px]",user:o.user}),(0,a.jsx)(_.x6,{ns:"base",i18nKey:"file-browser.sort.creator-human",defaults:"Me"})]}),value:"user"},{label:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(ex.Qtr,{size:"x-small",className:"w-6 h-6"}),(0,a.jsx)(_.x6,{ns:"base",i18nKey:"file-browser.sort.creator-grok",defaults:"Grok"})]}),value:"grok"}],[o.user]),P=[{value:"image",label:t("files-filter-images","Images"),icon:I.xfq},{value:"document",label:t("files-filter-documents","Documents"),icon:I.pyG},{value:"spreadsheet",label:t("files-filter-spreadsheets","Spreadsheets"),icon:I.KbA},{value:"code",label:t("files-filter-code","Code"),icon:I.loI},{value:"pdf",label:t("files-filter-pdf","PDF"),icon:I.yTC}];return(0,a.jsxs)("header",{className:"flex flex-col gap-px @container px-4",children:[(0,a.jsxs)("div",{className:"flex gap-2 h-header-height items-center",children:[(0,a.jsx)("div",{className:"flex-1 relative min-h-[32px]",children:(0,a.jsx)(S.N,{mode:"sync",children:f?(0,a.jsx)(Q.P.div,{initial:{width:"32px",height:"32px",opacity:0},animate:{width:"100%",height:"auto",opacity:1},exit:{width:"32px",height:"32px",opacity:0},transition:{duration:.1,ease:"easeOut"},className:"flex justify-end items-center gap-2 absolute top-0 end-0",children:(0,a.jsx)(ev,{value:d,onChange:e=>{u(e.target.value)},autoFocus:!0,className:"flex-1",onKeyDown:e=>{"Escape"===e.key&&z()},onClose:z})},"search-input"):(0,a.jsxs)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeOut"},className:"flex justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold flex items-center justify-start",children:(0,a.jsx)(b.N_,{route:{page:"files",fileId:null},children:t("files-explorer-header","Files")})}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(m.$n,{variant:"ghost",size:"iconSm",rounded:!0,"aria-label":t("files-explorer-collapse-button","Collapse"),onClick:()=>X.R.getState().setIsFileExplorerCollapsed(!0),children:(0,a.jsx)(I.KD8,{size:18,className:"text-fg-secondary"})}),(0,a.jsxs)(m.$n,{variant:"ghost",size:"iconSm",rounded:!0,onClick:()=>x(!0),children:[(0,a.jsx)(I.WIv,{size:18,className:"text-fg-secondary"}),(0,a.jsx)("span",{className:"sr-only",children:t("files-search-open-button.label","Show search input")})]})]})]},"title-and-button")})}),(0,a.jsx)(ep,{})]}),(0,a.jsxs)("div",{className:"flex gap-2 overflow-x-auto no-scrollbar h-subheader-height items-center",children:[(0,a.jsxs)(es.rI,{open:h,onOpenChange:p,children:[(0,a.jsxs)("div",{className:(0,y.cn)("flex items-center rounded-full border gap-0.5 border-border-l2 h-8 overflow-hidden flex-shrink-0 focus-visible:bg-button-ghost-hover hover:bg-button-ghost-hover",(C||N)&&"bg-button-ghost-hover border-secondary pr-0"),children:[(0,a.jsx)(es.ty,{asChild:!0,children:(0,a.jsxs)(m.$n,{variant:"ghost",size:"sm",className:(0,y.cn)("border flex-shrink-0 border-transparent hover:bg-transparent",(C||N)&&"pr-0 hover:bg-transparent"),style:{boxShadow:"none"},children:[(0,a.jsx)(I.YGH,{size:16,className:"text-fg-secondary"}),(0,a.jsx)("span",{className:"sr-only",children:t("files-filter-open-button.label","Show filters")}),(0,a.jsx)("span",{className:"hidden @[160px]:inline-block",children:t("files-filter-show-menu","Filter")})]})}),C||N?(0,a.jsxs)(m.$n,{variant:"ghost",size:"iconSm",onClick:v,rounded:!0,children:[(0,a.jsx)(I.uv5,{size:16}),(0,a.jsx)("span",{className:"sr-only",children:t("files-filter-clear","Clear all filters")})]}):null]}),(0,a.jsxs)(es.SQ,{side:"bottom",align:"start",sideOffset:6,className:"no-a11y-check rounded-2xl",children:[(0,a.jsxs)("div",{className:"min-w-40 flex flex-col gap-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-secondary ms-3 my-2 min-w-32",children:t("files-filter-by-creator","Created By")}),R.map(e=>(0,a.jsxs)(es._2,{onSelect:()=>k(e.value),className:"flex items-center gap-2",children:[e.label,N===e.value&&(0,a.jsx)("span",{className:"ms-auto text-xs text-primary",children:(0,a.jsx)(I.Srz,{size:16,className:"text-primary"})})]},"CREATOR_OPTIONS"+e.value.toString()))]}),(0,a.jsx)(es.mB,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-secondary ms-3 my-2",children:t("files-filter-by-type","File Type")}),P.map(e=>{let s=e.icon;return(0,a.jsxs)(es._2,{onSelect:()=>E(e.value),className:"flex items-center gap-2",children:[(0,a.jsx)(s,{size:16,className:"text-fg-secondary"}),e.label,C===e.value&&(0,a.jsx)("span",{className:"ms-auto text-xs text-primary",children:(0,a.jsx)(I.Srz,{size:16,className:"text-primary"})})]},e.value||"all")})]})]}),(d||C||N)&&(0,a.jsx)(m.$n,{variant:"outline",onClick:v,className:"w-full mt-4 rounded-xl",children:t("files-filter-reset","Reset filters")})]})]}),(0,a.jsxs)(es.rI,{children:[(0,a.jsx)(es.ty,{asChild:!0,children:(0,a.jsxs)(m.$n,{variant:"outline",size:"sm",rounded:!0,className:" flex-shrink-0",children:[(0,a.jsx)(I.ufo,{size:15,className:"text-fg-secondary"}),(0,a.jsx)("span",{className:"sr-only",children:t("files-sort-show-menu","Show sorting menu")}),(0,a.jsx)("span",{className:"hidden @[160px]:inline-block",children:t("files-sort-show-menu","Sort")})]})}),(0,a.jsx)(es.SQ,{side:"bottom",align:"start",sideOffset:6,className:"min-w-36",children:eo.map(e=>(0,a.jsxs)(es._2,{onSelect:()=>w(e.value),className:"flex items-center gap-2",children:[e.label,j===e.value&&(0,a.jsx)("span",{className:"ms-auto text-xs text-primary",children:(0,a.jsx)(I.Srz,{size:16,className:"text-primary"})})]},e.value))})]}),(0,a.jsx)(eb,{})]})]})}let eb=(0,A.memo)(function(){let e=(0,X.R)(e=>"loading"===e.listStatus);return(0,a.jsx)(S.N,{children:e&&(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"flex-1 flex justify-end items-center",children:(0,a.jsx)(f.y,{size:"xs",className:"border-b-secondary"})})})});var ey=t(83638),ew=t(81900),eN=t(51182);function ek(e){let{onRetry:s}=e,{t}=(0,_.Bd)("files");return(0,a.jsxs)("div",{className:"border border-l1 bg-surface-l1 rounded-2xl p-4 flex flex-col items-center justify-center text-center",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:t("files-list-loading-error.title","Could not load files")}),(0,a.jsx)("p",{className:"text-xs text-fg-secondary mb-4",children:t("files-list-loading-error.message","Something went wrong while loading your files")}),(0,a.jsxs)(m.$n,{variant:"outline",size:"md",onClick:s,children:[(0,a.jsx)(I.e9t,{className:"h-4 w-4 text-secondary"}),t("files-list-loading-error.retry","Retry")]})]})}function eI(e){let{onFiltersClear:s}=e,{t}=(0,_.Bd)("files");return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-4 overflow-hidden",children:[(0,a.jsx)("p",{className:"text-muted-foreground truncate",children:t("files-no-results.label","No results")}),s&&(0,a.jsxs)(m.$n,{variant:"outline",size:"md",onClick:()=>{s()},children:[(0,a.jsx)(I.uv5,{size:16}),(0,a.jsx)("span",{className:"truncate",children:t("files-clear-filters.label","Clear filters")})]})]})}var eC=t(93038);function eS(e){var s;let{asset:t,stack:l,className:i}=e,n=(0,A.useRef)(!l.length);return l.length?(0,a.jsx)("div",{className:(0,y.cn)("relative",i),children:(0,a.jsxs)(S.N,{initial:n.current,children:[(0,a.jsx)(Q.P.div,{animate:{x:-2,y:2,rotate:-8},transition:{delay:.2,duration:1},children:(0,a.jsx)(V.E,{metadata:(0,$.B)(t),className:"rounded-md w-6 h-6 ms-0 me-0 [&>img]:h-full [&>img]:w-full bg-surface-l1 border border-white"})},t.assetId),(0,a.jsx)(Q.P.div,{animate:{x:2,y:-2,rotate:8},transition:{duration:2},className:"absolute inset-0 -z-10",children:(0,a.jsx)(V.E,{metadata:(0,$.B)(l[0]),className:"rounded-md w-6 h-6 ms-0 me-0 [&>img]:h-full [&>img]:w-full bg-surface-l1 border border-white"})},null==(s=l[0])?void 0:s.assetId)]})}):(0,a.jsx)(V.E,{metadata:(0,$.B)(t),className:"rounded-md w-6 h-6 ms-0 me-0 [&>img]:h-full [&>img]:w-full bg-surface-l1 border border-white"})}function eE(e){let{okLabel:s,onOk:t,cancelLabel:l,onCancel:i}=e;return(0,a.jsxs)("div",{className:(0,y.cn)("flex","items-center justify-end gap-0.5"),children:[(0,a.jsxs)(m.gx,{variant:"ghost",size:"iconSm",rounded:!0,onClick:i,tooltipContent:l,tooltipContentProps:{hideWhenDetached:!0},children:[(0,a.jsx)(I.uv5,{size:16,className:"text-fg-primary"}),(0,a.jsx)("span",{className:"sr-only",children:l})]}),(0,a.jsxs)(m.gx,{variant:"ghost",size:"iconSm",rounded:!0,onClick:t,tooltipContent:s,tooltipContentProps:{hideWhenDetached:!0},children:[(0,a.jsx)(I.Srz,{size:16,className:"text-fg-primary"}),(0,a.jsx)("span",{className:"sr-only",children:l})]})]})}var ez=t(80354);let eR=(0,A.memo)(function(e){let{value:s,onSubmit:t,onCancel:l,state:i,suffix:n,className:r}=e,{t:o}=(0,_.Bd)("files"),[d,c]=(0,A.useState)(s),u=(0,A.useRef)(null);(0,A.useEffect)(()=>{c(s)},[s]),(0,A.useEffect)(()=>{"edit"===i&&u.current&&(u.current.focus(),u.current.setSelectionRange(0,u.current.value.lastIndexOf(".")))},[i]);let m=()=>{t(d.trim())},f=e=>{e.preventDefault(),e.stopPropagation(),m()};if("edit"===i)return(0,a.jsxs)("div",{className:"flex flex-1",onClick:ez.Y,children:[(0,a.jsx)("input",{ref:u,className:"w-full bg-transparent focus-visible:outline-none",value:d,onKeyDown:e=>{"Enter"===e.key?m():"Escape"===e.key&&l()},onChange:e=>c(e.target.value),"aria-label":o("filename-edit-input.label","Edit file name")}),(0,a.jsx)(eE,{onCancel:e=>{e.preventDefault(),e.stopPropagation(),l()},cancelLabel:o("Cancel","Cancel"),onOk:e=>{e.preventDefault(),e.stopPropagation(),f(e)},okLabel:o("Save","Save")})]});let x=(0,y.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block",r);return(0,a.jsxs)("span",{className:x,style:{maskImage:v.uU,WebkitMaskImage:v.uU},children:[s,n&&(0,a.jsx)("span",{className:"text-fg-tertiary",children:n})]})}),eA=e=>(0,a.jsx)("span",{className:"font-bold",children:e}),e_=e=>{let{text:s,pattern:t,renderMatch:l=eA}=e,i=(0,A.useMemo)(()=>{let e=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),a=RegExp("(".concat(e,")"),"gi");return s.split(a)},[s,t]);return(0,a.jsx)(a.Fragment,{children:i.map((e,s)=>e.toLowerCase()===t.toLowerCase()&&l?(0,a.jsx)(A.Fragment,{children:l(e)},s):(0,a.jsx)(A.Fragment,{children:e},s))})};function eP(e){let{assetId:s}=e,t=(0,X.R)(e=>e.debouncedSearchQuery),l=(0,X.R)(e=>{var a,l;return null!=(l=null==(a=e.searchHighlight[t])?void 0:a[s])?l:""});return l&&t?(0,a.jsx)("div",{className:"px-3 mb-2 text-xs text-fg-secondary text-start max-w-full text-wrap line-clamp-3 leading-normal max-h-[4.5em]",children:(0,a.jsx)(e_,{text:l,pattern:t,renderMatch:eM})}):null}let eM=e=>(0,a.jsx)("span",{className:"text-fg-primary font-semibold",children:e});var eT=t(93154);let eD=(0,A.memo)(function(e){var s,t,l,i,n,r,o;let{asset:d,stackedAssets:c,action:u,onActionChange:f,className:x,isActive:h=!1}=e,{push:g,route:v}=(0,b.wK)(),{t:j}=(0,_.Bd)("base"),w=(0,X.R)((0,eN.k)(e=>e.assetsById)),N=(0,p._)(),[,k]=(0,eT.s)(null!=(t=d.name)?t:""),C=null!=(i=null!=k?k:(0,eC.extension)(null!=(l=d.mimeType)?l:""))?i:"",S=(null==u?void 0:u.type)==="edit"&&(null==u?void 0:u.assetId)===d.assetId,E=(null==u?void 0:u.type)==="delete"&&(null==u?void 0:u.assetId)===d.assetId,z=(0,X.R)(e=>e.renameAsset),R=(0,A.useMemo)(()=>c.map(e=>{var s;return null==(s=w[e])?void 0:s.data}).filter(Boolean).sort((e,s)=>new Date((null==e?void 0:e.createTime)||"").getTime()-new Date((null==s?void 0:s.createTime)||"").getTime())||[],[c,w]),P=(0,A.useCallback)(()=>{f(null)},[f]),M=(0,A.useCallback)(e=>{var s,t,a,l;let i=null==(t=w[d.rootAssetId||d.assetId])||null==(s=t.data)?void 0:s.sourceConversationId,n=null!=(l=null!=(a=d.rootAssetSourceConversationId)?a:i)?l:d.sourceConversationId;n&&(e.stopPropagation(),e.preventDefault(),g({page:"chat",conversationId:n,temporary:!1}))},[d.rootAssetSourceConversationId,d.rootAssetId,d.assetId,d.sourceConversationId,w,g]),T=(0,A.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),f({type:"delete",assetId:d.assetId})},[d.assetId,f]),D=(0,A.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),P()},[P]),B=(0,X.R)(e=>e.deleteAsset),F=async e=>{var s;e.stopPropagation(),e.preventDefault(),f(null),await B(null!=(s=d.assetId)?s:""),N("files.delete",d.assetId,{location:"FileRow:handleDelete"}),(null==c?void 0:c.length)&&await Promise.all(c.map(e=>(N("files.delete",e,{location:"FileRow:handleDelete"}),B(e)))),"files"===v.page&&(v.fileId===d.rootAssetId||v.fileId===d.assetId)&&g({page:"files",fileId:null})},U=(0,y.cn)("flex py-0 gap-1 relat justify-start items-center w-full overflow-hidden group/file hover:bg-button-ghost-hover min-h-10 h-auto items-stretch",{"bg-button-ghost-active":h},x);return(0,a.jsx)(m.$n,{variant:"ghost",className:U,asChild:!0,children:(0,a.jsxs)(b.N_,{route:{page:"files",fileId:null!=(r=null!=(n=d.rootAssetId)?n:d.assetId)?r:null},className:(0,y.cn)("group/file text-sm","w-full flex flex-col justify-center !gap-0 text-primary ps-0 pe-1"),children:[(0,a.jsxs)("div",{className:"w-full flex flex-row gap-2 text-primary ps-2 items-center min-h-10",children:[(null==(s=d.mimeType)?void 0:s.startsWith("image/"))?(0,a.jsx)(eS,{asset:d,stack:R,className:"w-fit h-fit"}):(0,a.jsx)(V.E,{metadata:(0,$.B)(d),className:"rounded-md w-6 h-6 ms-0 me-0 [&>img]:h-full [&>img]:w-full bg-transparent"}),(0,a.jsx)(eR,{value:null!=(o=d.name)?o:"",onCancel:P,onSubmit:e=>{var s;f(null),""!==e&&(z(null!=(s=d.assetId)?s:"",e).catch((0,en.HX)("FileRow")),N("files.rename",e,{location:"FileRow:save"}))},state:S?"edit":"view"}),S?null:E?(0,a.jsx)(eE,{onCancel:D,cancelLabel:j("Cancel","Cancel"),onOk:F,okLabel:j("Delete","Delete")}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:(0,y.cn)("hidden group-hover/file:hidden group-focus-visible/file:hidden","text-fg-secondary"),children:C}),(0,a.jsxs)("div",{className:(0,y.cn)("flex items-center justify-end"),children:[(0,a.jsxs)(es.rI,{children:[(0,a.jsx)(es.ty,{asChild:!0,children:(0,a.jsxs)(m.gx,{tabIndex:-1,className:(0,y.cn)("text-fg-secondary",d.isRootAssetCreatedByModel?"w-8":"w-0","group-hover/file:w-8 group-focus-visible/file:w-8 group-hover/file:flex group-focus-visible/file:flex"),variant:"ghost",size:"iconSm",rounded:!0,style:{boxShadow:d.isRootAssetCreatedByModel?"none":void 0},tooltipContent:j("files-more-options.label","Options"),tooltipContentProps:{hideWhenDetached:!0,side:"bottom"},children:[d.isRootAssetCreatedByModel?(0,a.jsx)(ex.Qtr,{size:16,className:(0,y.cn)("opacity-20 group-hover/file:hidden group-focus-visible/file:hidden")}):null,(0,a.jsx)(I.YbC,{size:16,className:"hidden group-hover/file:block group-focus-visible/file:block"}),(0,a.jsx)("span",{className:"sr-only",children:j("files-more-options.label","Options")})]})}),(0,a.jsxs)(es.SQ,{side:"bottom",align:"end",className:"min-w-36",children:[(0,a.jsxs)(es._2,{onClick:e=>e.stopPropagation(),onSelect:e=>{e.preventDefault(),f({type:"edit",assetId:d.assetId})},className:"flex items-center gap-2",children:[(0,a.jsx)(I.rZj,{size:16,className:"text-fg-secondary"}),j("files.rename","Rename")]}),d.isRootAssetCreatedByModel&&(0,a.jsxs)(es._2,{onClick:e=>{M(e)},className:"flex items-center gap-2",children:[(0,a.jsx)(I.PBN,{size:16,className:"text-fg-secondary"}),j("files.open-conversation","Open Conversation")]})]})]}),(0,a.jsxs)(m.gx,{tabIndex:-1,className:(0,y.cn)("text-fg-secondary","hidden group-hover/file:flex group-focus-visible/file:flex"),onClick:T,variant:"ghost",size:"iconSm",rounded:!0,tooltipContent:j("files-list-delete.tooltip","Delete file"),tooltipContentProps:{hideWhenDetached:!0},children:[(0,a.jsx)(I.TBR,{size:16}),(0,a.jsx)("span",{className:"sr-only",children:j("files-list-delete","Delete file")})]})]})]})]}),(0,a.jsx)(eP,{assetId:d.assetId})]})})});var eB=t(69358),eF=t(80226);function eU(){return(0,a.jsx)(eB.P,{delayMs:300,children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-3","aria-busy":"true",children:[(0,a.jsx)(eO,{className:"w-1/5"}),(0,a.jsx)(eO,{className:"w-3/5"}),(0,a.jsx)(eO,{className:"w-2/5"}),(0,a.jsx)(eO,{className:"w-1/5"}),(0,a.jsx)(eO,{className:"w-2/3"})]})})}let eO=e=>{let{className:s}=e;return(0,a.jsxs)("div",{className:"flex w-full gap-3 items-center",children:[(0,a.jsx)(eF.E,{className:"w-6 h-6 rounded-md"}),(0,a.jsx)(eF.E,{className:(0,y.cn)("w-full rounded-xl h-4",s)})]})};function eG(){let{t:e}=(0,_.Bd)("files");return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full gap-4 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("h2",{className:"text-md font-semibold text-center text-fg-primary truncate",children:e("files-empty.title","No Files")}),(0,a.jsx)("p",{className:"text-center text-fg-secondary truncate text-sm",children:e("files-empty.subtitle","Upload files or ask Grok to create one.")})]}),(0,a.jsx)(ep,{children:(0,a.jsxs)(m.$n,{className:"flex-shrink-0",size:"md",variant:"filledSecondary",children:[(0,a.jsx)(I.FWt,{className:"size-4"}),e("files-empty.add-button","Add File")]})})]})}let eL=(0,A.memo)(e=>{let{className:s}=e,{t}=(0,_.Bd)("files"),l=(0,b.wK)(),i=l.push,n="files"===l.route.page?l.route:(0,el.Z)("Files list only for /files"),[r,o]=(0,A.useState)(null),d=(0,X.R)(e=>e.loadFirstPage),c=(0,X.R)(e=>e.loadNextPage),u=(0,X.R)(e=>e.listPageToken),m=(0,p._)();(0,A.useEffect)(()=>{d({search:n.search,sort:n.sort,fileType:n.fileType,createdBy:n.createdBy}),n.search&&m("files.search","",{location:"files-list:useEffect"}),n.sort&&"used"!==n.sort&&m("files.sort",n.sort,{location:"files-list:useEffect"}),(n.fileType||n.createdBy)&&m("files.filter","",{location:"files-list:useEffect"})},[d,n,m]);let f=(0,X.R)(e=>!!(e.debouncedSearchQuery||e.searchFileType||e.source!==ew.eK.SourceAny)),x=(0,X.R)((0,eN.k)(e=>e.list)),h=(0,X.R)((0,eN.k)(e=>e.listStatus)),g=(0,X.R)((0,eN.k)(e=>e.assetsById)),v=(0,X.R)((0,eN.k)(e=>e.currentVersion)),j=(0,A.useMemo)(()=>x.map(e=>{var s;return null==(s=g[e])?void 0:s.data}).filter(el.O),[x,g]),w=(0,A.useMemo)(()=>{let e=j.reduce((e,s)=>{var t;return(null==(t=s.mimeType)?void 0:t.startsWith("image/"))&&s.sourceConversationId&&(e[s.sourceConversationId]||(e[s.sourceConversationId]=[]),e[s.sourceConversationId].push(s.assetId)),e},{});return j.map(s=>{var t;let a=[];if((null==(t=s.mimeType)?void 0:t.startsWith("image/"))&&s.currentConversationId){let t=e[s.currentConversationId];t&&a.push(...t)}return{rootAsset:s,children:a}})},[j]),N=(0,A.useMemo)(()=>{let e=new Set(w.flatMap(e=>e.children.filter(s=>s!==e.rootAsset.assetId)));return x.filter(s=>!e.has(s))},[x,w]),k=(0,X.R)(e=>e.creationRequests),I=(0,A.useCallback)(()=>{u&&"loading"!==h&&c()},[h,c,u]),C=(0,ey.B)(I),E=null;if("loading"===h&&!u&&0===x.length)return(0,a.jsx)(eU,{});"ready"===h?0===x.length?E=f?(0,a.jsx)(eI,{onFiltersClear:()=>{i({...n,sort:void 0,createdBy:void 0,fileType:void 0,search:""})}}):(0,a.jsx)(eG,{}):u&&(E=(0,a.jsx)("div",{ref:C,className:"text-center mt-8 text-sm text-fg-secondary",children:t("files-scrollto.label","Scroll to load more")})):"loading"===h?u&&(E=(0,a.jsx)(eU,{})):"error"===h&&(E=(0,a.jsx)(ek,{onRetry:d}));let z=(0,y.cn)("gap-0 py-1.5",s);return(0,a.jsxs)(Z.D,{className:z,fadeSize:"md","aria-busy":"loading"===h,children:[(0,a.jsx)("ol",{children:k.filter(e=>!e.assetId||!g[e.assetId]).map(e=>(0,a.jsx)(Q.P.li,{initial:{height:0,scaleY:0,opacity:0},animate:{height:"auto",scaleY:1,opacity:1},transition:{duration:.15},children:(0,a.jsx)(eW,{request:e})},e.name))}),(0,a.jsx)("ol",{children:(0,a.jsx)(S.N,{children:N.map(e=>{var s,t;let l=null==(s=g[v[e]])?void 0:s.data;return l?(0,a.jsx)(Q.P.li,{initial:{height:"auto",scaleY:1,opacity:1},exit:{height:0,scaleY:0,opacity:0},transition:{duration:.15},children:(0,a.jsx)(eD,{asset:l,stackedAssets:(null==(t=w.find(s=>s.rootAsset.assetId===e))?void 0:t.children)||[],action:r,onActionChange:o,isActive:n.fileId===e||k.some(s=>s.assetId===e)})},e):null})})}),E]})});function eW(e){var s;let{request:t}=e,[l,i]=(0,eT.s)(null!=(s=t.name)?s:"");return(0,a.jsxs)("div",{className:"h-[42px] rounded-xl px-3.5 text-sm p-4 flex items-center bg-button-ghost-active",children:[(0,a.jsx)(f.y,{size:"xs",className:"me-[11px]"}),(0,a.jsx)("span",{children:l}),i&&(0,a.jsxs)("span",{className:"text-fg-secondary",children:[".",i]})]})}function eH(e){let{className:s}=e;return(0,a.jsxs)("div",{className:(0,y.cn)("flex flex-col",s),children:[(0,a.jsx)(ej,{}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden relative",children:[(0,a.jsx)(eL,{className:"h-full px-2"}),(0,a.jsx)(em,{className:"m-2"})]})]})}var eV=t(5663),e$=t(33231),eK=t(48175),eq=t(10953),eX=t(5828);function eQ(e){let{className:s,buttonText:t,multiple:l=!0}=e,{t:i}=(0,_.Bd)("files"),n=(0,A.useRef)(null),r=(0,y.cn)("flex items-center @xs:flex-col @xs:items-start @xs:justify-between h-auto p-3 rounded-2xl min-w-32 bg-surface-l1 border-border-l1",s),o=(0,X.R)(e=>e.uploadAsset),{push:d}=(0,b.wK)(),c=(0,A.useCallback)(e=>d({page:"files",fileId:e}),[d]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.$n,{variant:"outline",className:r,onClick:()=>{n.current&&n.current.click()},disabled:!1,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.sjq,{className:"w-6 h-6 stroke-[1.5] text-secondary"}),(0,a.jsx)("span",{children:t||i("file-upload-button.label","Upload Files")})]})}),(0,a.jsx)("input",{type:"file",ref:n,style:{display:"none"},onChange:e=>{e.target.files&&(Array.from(e.target.files).forEach(e=>{o(e,c)}),e.target.value="")},multiple:l})]})}let eJ="w-6 h-6 text-secondary stroke-[1.5]",eY=(0,A.memo)(e=>{let{className:s}=e,{ENABLE_IMAGE_EDITOR_IN_FILES:t,ENABLE_XLSX_EDITING:l}=(0,h.h)(),{t:i}=(0,_.Bd)("files"),{push:n}=(0,b.wK)(),r=(0,eh.KR)(),o=(0,p._)(),d=(0,X.R)(e=>e.createAsset),c=(0,A.useCallback)((e,s)=>{d(e,s),o("files.create-file",e,{location:"Empty:handleCreate"})},[d,o]),u=e=>n({page:"files",fileId:e});return(0,a.jsxs)("div",{className:"h-full relative",children:[(0,a.jsx)(eX.e,{className:"absolute top-3 left-3 z-10"}),(0,a.jsxs)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},className:(0,y.cn)("flex flex-col items-center justify-center h-full p-4 @container",s),children:[(0,a.jsx)(eq.$r,{className:"w-20 h-20 text-muted-foreground"}),(0,a.jsx)("p",{className:"mt-4 text-md text-muted-foreground text-center",children:i("empty.create-something-new","Create something new")}),(0,a.jsxs)("div",{className:"w-full max-w-xl gap-3 mt-6 overflow-wrap items-stretch flex flex-col @xs:items-center @xs:flex-row flex-wrap justify-center ",children:[(0,a.jsx)(eZ,{icon:(0,a.jsx)(I.pyG,{className:eJ}),text:i("empty.document","Document"),onClick:()=>void c(r.markdown.newFileName,u)}),l&&(0,a.jsx)(eZ,{icon:(0,A.createElement)(r.spreadsheet.Icon,{className:eJ}),text:i("empty.spreadsheet","Spreadsheet"),onClick:()=>void c(r.spreadsheet.newFileName,u)}),(0,a.jsxs)(es.rI,{children:[(0,a.jsx)(es.ty,{asChild:!0,children:(0,a.jsx)(eZ,{icon:(0,a.jsx)(I.loI,{className:eJ}),text:i("empty.code","Code")})}),(0,a.jsx)(es.SQ,{className:"min-w-36",side:"right",sideOffset:12,children:eh.cC.map(e=>(0,a.jsx)(e0,{fileTypeId:e,disableIcons:!0,onSelect:e=>void c(e,u)},e))})]}),t&&(0,a.jsx)(eZ,{icon:(0,a.jsx)(I.XGR,{className:eJ}),text:i("empty.image","Image"),onClick:()=>{n({page:"files",fileId:null,emptyView:"image"})}}),(0,a.jsx)(eQ,{})]}),(0,a.jsx)(em,{className:"m-4"})]})]})});function eZ(e){let{icon:s,text:t,...l}=e;return(0,a.jsxs)(m.$n,{variant:"outline",className:"flex @xs:flex-col items-center justify-center @xs:items-start @xs:justify-between h-auto p-3 rounded-2xl min-w-32 @xs:bg-surface-l1 border-0  @xs:border-border-l1 @xs:border transition-none @xs:transition-colors",...l,children:[s,(0,a.jsx)("span",{children:t})]})}function e0(e){let{fileTypeId:s,onSelect:t,disableIcons:l}=e,{Icon:i,name:n,newFileName:r}=(0,eh.KR)()[s];return(0,a.jsxs)(es._2,{onSelect:()=>t(r),children:[l?null:(0,a.jsx)(i,{size:16,className:"me-2"}),n]})}var e1=t(4878),e2=t(43893),e3=t(44347),e4=t(91631),e5=t(39489),e6=t(82591),e8=t(72359),e9=t(28951),e7=t(93220);let se=e=>{let{selectedImage:s,isPeekingParent:t,isFinalImageLoaded:l,setIsFinalImageLoaded:i,isParentImageLoaded:n,setIsParentImageLoaded:r}=e,[o,d]=(0,A.useState)([]),[c,u]=(0,A.useState)(!0),m=(0,A.useMemo)(()=>"streaming"===s.state,[s.state]),f=(0,A.useMemo)(()=>!!(s.generatedImageHeight&&s.generatedImageWidth),[s.generatedImageHeight,s.generatedImageWidth]),x=(0,A.useMemo)(()=>s.generatedImageHeight&&s.generatedImageWidth?s.generatedImageWidth/s.generatedImageHeight:4/3,[s.generatedImageHeight,s.generatedImageWidth]);return(0,A.useEffect)(()=>{(m||!c)&&(null==s?void 0:s.progressMap)?d(s.progressMap):!m&&(null==s?void 0:s.url)?d(e=>[...e,{progress:1,imageUrl:s.url||""}]):d([])},[m,null==s?void 0:s.url,null==s?void 0:s.progressMap,c]),(0,A.useEffect)(()=>{m&&c&&u(!1),m||!l||c||u(!0)},[m,l,c]),(0,a.jsx)("figure",{className:(0,y.cn)("relative group/image w-full max-w-5xl 2xl:max-w-6xl overflow-hidden rounded-lg"),children:(0,a.jsx)(S.N,{mode:"wait",children:m||!c?f?(0,a.jsx)(Q.P.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:1,filter:"blur(0px)",transition:{delay:1.5}},transition:{ease:"easeInOut"},className:"h-full mx-auto",style:{aspectRatio:x,maxHeight:s.generatedImageHeight},children:(0,a.jsx)(e9.L,{status:"streaming",intermediateResults:o,isModerated:s.isModerated,aspectRatio:x})},"streaming-image"):(0,a.jsx)(e7.$,{}):(0,a.jsxs)("div",{className:"flex relative items-center justify-center w-full h-full",children:[s.url&&(0,a.jsxs)(a.Fragment,{children:[!l&&(0,a.jsx)(e7.$,{className:"absolute z-20 inset-0"}),(0,a.jsx)(Q.P.img,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},exit:"hidden",animate:s&&t||!l?"hidden":"visible",transition:{ease:"easeInOut"},src:s.url,alt:"active-image",className:"max-h-full aspect-auto rounded-lg",onLoad:()=>i(!0)},"finished-image")]}),(0,a.jsx)(S.N,{children:!m&&s&&t&&(0,a.jsxs)(Q.P.div,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},initial:"hidden",exit:"hidden",animate:"visible",transition:{ease:"easeInOut"},className:"absolute z-10 w-full h-full flex items-center overflow-hidden",children:[!n&&(0,a.jsx)(e7.$,{className:"absolute z-20 inset-0"}),(0,a.jsx)(Q.P.img,{variants:{hidden:{opacity:0,filter:"blur(4px)"},visible:{opacity:1,filter:"blur(0px)"}},animate:n?"visible":"hidden",src:s.parentImageUrl,alt:"parent-image",className:"max-h-full aspect-auto mx-auto rounded-lg",onLoad:()=>r(!0)},"parent-image")]},"parent-image-container")})]})})})};var ss=t(24734),st=t(70888),sa=t(59996);let sl=e=>{let{children:s,onUploadImage:t}=e,{t:l}=(0,_.Bd)("base"),n=(0,st.x)(R.A("fetchUploadFile")),r=(0,st.x)(R.A("removeByConversationId")),o=(0,i.aP)(R.A("conversationId")),d=(0,ss.K)(),c=(0,A.useRef)(null),[u,x]=(0,A.useState)(!1),[h,p]=(0,A.useState)(!1),[g,v]=(0,A.useState)(!1),j=(0,A.useCallback)(()=>{var e;null==(e=c.current)||e.click()},[]),b=(0,A.useCallback)(async(e,s)=>{let a;if(1!==e.length)return void eu.oR.error(l("image-editor.one-upload-allowed","Only a single image file is allowed"));if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(e[0].type))return void eu.oR.error(l("image-editor.images-only-allowed","Only image files are allowed"));p(!0);try{let s=n(e[0],o||"no_conversation_id");a=await s.metadataPromise}catch(e){d("image-editor-upload:uploadFile",e)}a instanceof Error&&d("image-editor-upload:uploadFile",a,l("image-editor.failed-to-upload","Failed to upload file")),p(!1),r(o||"no_conversation_id"),!a||a instanceof Error||t({image:a,type:s})},[l,n,o,t,r,d]),y=(0,A.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h||x(!0)},[h]),w=(0,A.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),x(!1)},[]),N=(0,A.useCallback)(e=>{if(e.preventDefault(),e.stopPropagation(),x(!1),!h)return b(Array.from(e.dataTransfer.files),"upload")},[b,h]),k=(0,A.useCallback)(e=>{if(e.target.files)return b(Array.from(e.target.files),"upload").finally(()=>{c.current&&(c.current.value="")})},[b]),C=(0,A.useCallback)(async e=>b([e],"draw").finally(()=>{v(!1)}),[b]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},onDragOver:y,onDragLeave:w,onDrop:N,className:"border resize transition-colors w-full h-full flex justify-center items-center border-border-l1 rounded-2xl p-8 mb-3 text-center ".concat(u&&!h&&"bg-surface-l1 border-border-l1"),children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 w-full",children:[(0,a.jsx)("div",{className:"p-4 rounded-full text-fg-secondary transition-colors bg-surface-l1",children:(0,a.jsx)(S.N,{mode:"popLayout",children:u&&!h?(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsx)(I.sv7,{className:"size-6"})},"files"):(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsx)(I.XGR,{className:"size-6"})},"image-plus")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-primary",children:l("image-editor.empty.title","Ask Grok to create an image")}),(0,a.jsx)(S.N,{mode:"popLayout",children:h?(0,a.jsx)(Q.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary whitespace-nowrap",children:l("image-editor.empty.uploading-image","Uploading image")},"uploading"):u?(0,a.jsx)(Q.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary whitespace-nowrap",children:l("image-editor.empty.drop-image","Drop image here")},"dragging"):(0,a.jsx)(Q.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-sm text-fg-secondary whitespace-nowrap",children:l("image-editor.empty.description","You can also upload an image or draw instead.")},"not-dragging")})]}),s,(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(m.$n,{variant:"outline",className:"text-fg-primary hover:bg-button-ghost-hover rounded-2xl transition-all py-2.5 px-4 h-auto *:hover:text-fg-primary *:hover:transition-colors",disabled:h,onClick:j,children:[h?(0,a.jsx)(f.y,{size:"xxs"}):(0,a.jsx)(I._OO,{className:"size-4 text-fg-secondary"}),l("image-editor.empty.upload","Upload")]}),(0,a.jsxs)(m.$n,{variant:"outline",className:"text-fg-primary hover:bg-button-ghost-hover rounded-2xl transition-all py-2.5 px-4 h-auto *:hover:text-fg-primary *:hover:transition-colors",disabled:h,onClick:()=>{v(!0)},children:[(0,a.jsx)(I.qHZ,{className:"size-4 text-fg-secondary"}),l("image-editor.empty.draw","Draw")]})]}),(0,a.jsx)("input",{ref:c,className:"hidden",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:k,multiple:!1,"data-testid":"file-input"})]})}),(0,a.jsx)(sa.A,{open:g,setOpen:v,onAttach:C})]})};var si=t(23856),sn=t(12220),sr=t(47127);let so=e=>{let{selectedImage:s,title:t,isSending:l=!1,onRegenerate:n,onClose:r}=e,{t:o}=(0,_.Bd)("base"),[d,c]=(0,A.useState)(!1),u=(0,i.aP)(e=>e.conversationId),x=(0,i.aP)(e=>e.lastMessageId),h=(0,A.useCallback)(()=>{var e;!d&&(null==s?void 0:s.url)&&(c(!0),(0,sn.G)(s.url,null==(e=s.url)?void 0:e.split("/").pop()).catch((0,en.HX)("image-editor:handleDownload")).finally(()=>c(!1)))},[d,s]);return(0,a.jsx)("header",{className:"flex justify-between w-full items-start h-10 gap-3  relative z-30 flex-shrink-0",children:(0,a.jsxs)(S.N,{mode:"popLayout",children:[t&&(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},className:"w-full overflow-hidden min-w-0 hidden sm:block",children:t},JSON.stringify(t)),(0,a.jsxs)("div",{className:"flex gap-2 ml-auto shrink-0",children:[(null==s?void 0:s.state)&&["streaming","error","completed"].includes(s.state)&&(null==s?void 0:s.regenResponseId)&&(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,a.jsx)(m.gx,{size:"iconMd",variant:"ghost",rounded:!0,"aria-label":o("image-editor.regenerate","Regenerate Image"),tooltipContent:o("image-editor.regenerate","Regenerate Image"),tooltipContentProps:{side:"bottom"},asChild:!0,disabled:"streaming"===s.state||l,onClick:n,children:(0,a.jsx)(Q.P.button,{whileTap:(null==s?void 0:s.state)==="streaming"||l?void 0:{scale:.9},children:(0,a.jsx)(I.V$7,{className:"size-5"})})})},"regenerate"),s&&(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,a.jsx)(m.gx,{variant:"ghost",size:"iconMd",rounded:!0,"aria-label":o("image-editor.download-image","Download Image"),tooltipContent:o("image-editor.download-image","Download Image"),tooltipContentProps:{side:"bottom"},disabled:"streaming"===s.state||!s.url||d,onClick:h,children:(0,a.jsx)(sr.p,{children:d?(0,a.jsx)(f.y,{size:"xs"}):(0,a.jsx)(I.KXi,{className:"size-5"})},d?"is-downloading":"download-icon")})},"download"),u&&x&&(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,a.jsx)(si.w,{variant:"ghost",size:"iconMd",rounded:!0,conversationId:u,responseId:x,iconProps:{size:20}})},"share"),r&&(0,a.jsx)(m.$n,{"aria-label":o("iamge-editor.close","Close Image Editor"),variant:"ghostSecondary",size:"iconMd",rounded:!0,onClick:r,children:(0,a.jsx)(I.uv5,{size:20})})]})]})})},sd=e=>{let{images:s,selectedImageId:t,onSelect:l}=e,i=(0,A.useRef)(null),n=(0,A.useRef)(null),r=(0,A.useRef)(0),o=(e,s)=>{let t={left:s.scrollLeft,top:s.scrollTop,right:s.scrollLeft+s.clientWidth,bottom:s.scrollTop+s.clientHeight},a={left:e.offsetLeft,top:e.offsetTop,right:e.offsetLeft+e.offsetWidth,bottom:e.offsetTop+e.offsetHeight};return a.left>=t.left&&a.right<=t.right&&a.top>=t.top&&a.bottom<=t.bottom};return(0,A.useEffect)(()=>{if(s.length>0&&i.current&&t){let e=i.current,s=e.querySelector('[data-image-id="'.concat(t,'"]'));s&&!o(s,e)&&s.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}},[s.length,t,s]),(0,A.useEffect)(()=>{let e=e=>{if(0===s.length||!t||document.activeElement&&("INPUT"===document.activeElement.tagName||"TEXTAREA"===document.activeElement.tagName||"DIV"===document.activeElement.tagName))return;let a=s.findIndex(e=>e.id===t);if(-1===a)return;let i=a;switch(e.key){case"ArrowLeft":case"ArrowUp":e.preventDefault(),i=a>0?a-1:s.length-1;break;case"ArrowRight":case"ArrowDown":e.preventDefault(),i=a<s.length-1?a+1:0;break;default:return}let o=Date.now();o-r.current>=150?(r.current=o,l(s[i])):(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{r.current=Date.now(),l(s[i])},150-(o-r.current)))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e),n.current&&clearTimeout(n.current)}},[s,t,l]),(0,a.jsx)(Q.P.aside,{ref:i,className:"flex @lg:flex-col @lg:max-h-full @lg:w-auto w-fit max-w-full h-auto overflow-auto items-center justify-start gap-2 z-30 px-4 py-1 @lg:px-1 @lg:py-4",variants:{visible:{opacity:1},hidden:{opacity:0}},initial:"hidden",animate:"visible",exit:"hidden",children:(0,a.jsx)(S.N,{mode:"popLayout",children:s.map(e=>(0,a.jsx)(Q.P.button,{"data-image-id":e.id,className:(0,y.cn)("size-20 shrink-0 relative rounded-xl border bg-background p-1 pointer-events-auto",{"ring-primary ring-2":e.id===t}),onClick:()=>l(e),whileTap:e.id!==t?{scale:.95}:{},variants:{visible:{opacity:1},hidden:{opacity:0},selected:{scale:1.05,opacity:1,transition:{duration:.15}}},initial:"hidden",animate:e.id===t?"selected":"visible",exit:"hidden",children:(0,a.jsx)("div",{className:"relative h-full w-full overflow-hidden rounded-lg",children:(0,a.jsx)("figure",{className:"absolute -translate-x-1/2 left-1/2 h-full aspect-[4/3] pointer-events-none",children:(0,a.jsx)(e9.L,{isModerated:e.isModerated,status:"streaming"===e.state?"streaming":"finished",iconSize:24,intermediateResults:"streaming"===e.state?e.progressMap:[{progress:1,imageUrl:e.url}]})})})},e.id))})},"image-editor-option-nav")};var sc=t(30693),su=t(4423),sm=t(43035),sf=t(34500);let sx=e=>{let{selectedImage:s,isSending:t,isStreaming:l,onSend:i}=e,{editImagePresets:n}=(0,sc.F)(),r=(0,g.Di)(),[o,d]=(0,A.useState)(null),[c,u]=(0,A.useState)(null),f=(0,A.useMemo)(()=>!s||l||t,[l,t,s]),x=(0,A.useCallback)(e=>{d(s=>s===e?null:e)},[d]),h=(0,A.useCallback)(e=>{if(s&&!l&&!t)return d(null),i(e.prompt,e.presetId)},[l,s,t,i]),p=(0,A.useCallback)(e=>{let s=document.querySelector('[data-preset-id="'.concat(e,'"]'));if(!s)return{};let t=s.getBoundingClientRect();return t.right+12+200>window.innerWidth?{left:t.left-200-12,top:t.top+(t.height-150)/2}:{left:t.right+12,top:t.top+(t.height-150)/2}},[]);return(0,A.useEffect)(()=>{if(!o||r)return void u(null);let e=()=>{let e=document.body.querySelector("[data-highlighted][data-preset-id]"),s=(null==e?void 0:e.getAttribute("data-preset-id"))||null;s&&u(s)};e();let s=new MutationObserver(e);return s.observe(document.body,{attributes:!0,attributeFilter:["data-highlighted"],subtree:!0}),()=>{s.disconnect()}},[o,r]),(0,a.jsx)("div",{className:"flex w-full xs:justify-center justify-start items-center overflow-x-auto xs:overflow-visible gap-2 xs:gap-3 relative z-30 no-scrollbar",children:n.map((e,s)=>(0,a.jsx)(Q.P.div,{variants:{hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},initial:"hidden",animate:"visible",transition:{duration:.15,ease:"easeInOut",delay:.06*s},className:"bg-surface-base rounded-full",children:r?(0,a.jsxs)(sf._s,{open:e.category===o,onOpenChange:s=>{s?d(e.category):d(null)},children:[(0,a.jsx)(sf.Uz,{disabled:f,asChild:!0,children:(0,a.jsx)(sh,{category:e,disabled:f})}),(0,a.jsxs)(sf.zj,{className:"max-h-[90dvh]",children:[(0,a.jsx)(sf.BE,{children:(0,a.jsxs)(sf.gk,{className:"flex items-center justify-center gap-2",children:[e.icon&&A.createElement(e.icon,{size:20,className:"text-secondary flex-shrink-0"}),e.label]})}),(0,a.jsx)("div",{className:"p-2 space-y-2 overflow-auto",children:e.presets.map(e=>(0,a.jsxs)(m.$n,{variant:"ghost",size:"lg",className:"w-full flex items-center justify-start gap-3 h-auto py-3",onClick:()=>h(e),children:[e.icon&&A.createElement(e.icon,{size:18,className:"text-secondary flex-shrink-0"}),(0,a.jsx)("span",{children:e.label})]},e.presetId))})]})]}):(0,a.jsxs)(es.rI,{open:e.category===o,onOpenChange:()=>x(e.category),children:[(0,a.jsx)(es.ty,{disabled:f,asChild:!0,children:(0,a.jsx)(sh,{category:e,disabled:f})}),(0,a.jsx)(es.SQ,{hideWhenDetached:!0,side:"top",sideOffset:8,className:"min-w-60 space-y-0.5",onMouseLeave:()=>{u(null)},onWheel:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:e.presets.map(s=>(0,a.jsxs)(es._2,{"data-preset-id":s.presetId,className:"flex items-center gap-2",onClick:()=>h(s),children:[s.icon&&A.createElement(s.icon,{size:16,className:"text-secondary flex-shrink-0"}),s.label,c===s.presetId&&(0,sm.createPortal)((0,a.jsxs)(Q.P.div,{layoutId:"preset-preview",className:"fixed w-[200px] h-[150px] bg-surface-l4 border border-border-l1 rounded-2xl shadow-lg z-50 pointer-events-none flex items-center justify-center p-1.5",style:p(s.presetId),children:[(0,a.jsx)(e7.$,{className:"absolute inset-0"}),s.previewUrl&&(0,a.jsx)(su.default,{src:s.previewUrl,alt:s.presetId,width:200,height:150,priority:!r&&o===e.category,className:"w-full h-full object-cover rounded-xl relative z-10"})]}),document.body)]},s.presetId))})]})},e.category))})},sh=A.forwardRef((e,s)=>{let{category:t,disabled:l,...i}=e;return(0,a.jsxs)(m.$n,{ref:s,size:"md",variant:"filledSecondary",rounded:!0,className:(0,y.cn)(!l&&"*:hover:text-primary transition-all"),disabled:l,...i,children:[t.icon&&A.createElement(t.icon,{size:16,className:"flex-shrink-0 text-secondary transition-colors"}),(0,a.jsx)("span",{children:t.label})]})});var sp=t(63174),sg=t(30388);let sv=e=>{let{selectedImage:s,isSending:t,isStreaming:l,isWaitingForResponse:i,isAborting:n,inputValue:r,onInputValueChange:o,onSend:d,onAbort:c}=e,{t:u}=(0,_.Bd)("base"),m=(0,A.useRef)(null),f=(0,A.useRef)(null),x=(0,A.useMemo)(()=>l||t||i,[l,t,i]),h=(0,A.useMemo)(()=>!t&&!i&&!l&&!!r.trim(),[t,r,l,i]);(0,A.useEffect)(()=>{if(!x&&f.current){let e=setTimeout(()=>{var e;null==(e=f.current)||e.focus()},50);return()=>clearTimeout(e)}},[x]);let p=(0,A.useCallback)(e=>{var s;e.preventDefault(),!x&&r.trim()&&(d(r),null==(s=f.current)||s.focus())},[d,x,r]),g=(0,A.useCallback)(e=>{if(e.stopPropagation(),"Enter"===e.key&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey&&!e.nativeEvent.isComposing){var s;e.preventDefault(),null==(s=m.current)||s.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}},[]);return(0,a.jsxs)("form",{className:(0,y.cn)("w-full rounded-[32px] p-3 bg-surface-l2 shadow shadow-input-border/10 flex gap-2 pl-5 items-end ring-1 ring-input-border ring-inset"),onSubmit:p,ref:m,children:[(0,a.jsx)(S.N,{children:x&&(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.1}},className:"pb-1.5 -ml-0.5",children:(0,a.jsx)(sg.d,{})},"loading-indicator")}),(0,a.jsx)(sp.A,{ref:f,className:(0,y.cn)("w-full @[480px]/input:px-3 bg-transparent focus:outline-none text-primary align-bottom resize-none pb-1.5 transition-all outline-transparent",x&&"animate-pulse"),onChange:e=>o(e.target.value),value:x?"":r,placeholder:x?u("image-editor.generating","Generating"):s?u("image-editor.describe-edits","Describe your edits"):u("image-editor.describe-image","Describe the image you want"),minRows:1,onKeyDown:g,disabled:x,name:"query",maxRows:5}),(0,a.jsx)("div",{className:(0,y.cn)("ml-auto flex flex-row items-end gap-1"),children:x?(0,a.jsx)(Q.P.button,{whileTap:{scale:.95},initial:{scale:.95,opacity:1},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:.5,transition:{duration:.2}},className:(0,y.cn)("group flex flex-col justify-center rounded-full focus:outline-none focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"),disabled:n,onClick:e=>{e.preventDefault(),c()},children:(0,a.jsx)("div",{className:(0,y.cn)("h-9","aspect-square flex flex-col items-center justify-center rounded-full","rounded-full ring-1 ring-inset","bg-primary text-background ring-button-outline-border"),children:(0,a.jsx)(I.M6A,{size:20})})}):(0,a.jsx)(Q.P.button,{initial:{opacity:.5},animate:{opacity:1,transition:{duration:.1}},whileHover:s?{scale:1.1}:void 0,whileTap:s?{scale:.95}:void 0,className:(0,y.cn)("group flex flex-col justify-center rounded-full focus:outline-none focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"),type:"submit","aria-label":u("image-editor.submit","Submit"),disabled:!h,children:(0,a.jsx)("div",{className:(0,y.cn)("h-9 relative","aspect-square flex flex-col items-center justify-center","rounded-full ring-1 ring-inset duration-100","before:absolute before:inset-0 before:rounded-full before:bg-primary before:ring-0 before:transition-all duration-500",h?"bg-primary text-background ring-transparent before: before:[clip-path:circle(50%_at_50%_50%)]":"bg-button-secondary text-secondary before:[clip-path:circle(0%_at_50%_50%)] ring-0"),children:(0,a.jsx)(I.Kpk,{size:20,className:"relative"})})})})]})},sj=e=>{let{images:s,selectedImage:t,title:l,inputValue:i,queryBarPosition:n="bottom",onInputValueChange:r,hideHeader:o=!1,hideQueryBar:d=!1,isAborting:c=!1,isSending:u=!1,isStreaming:m=!1,isWaitingForResponse:f=!1,onImageSelect:x,onSendQuery:h,onRegenerate:p,onAbort:g,onImageUpload:v,onClose:j}=e,{t:b}=(0,_.Bd)("base"),[w,N]=(0,e8.Mj)("image-editor-first-open",!0),[k,I]=(0,A.useState)(!1),[C,S]=(0,A.useState)(!1),[E,z]=(0,A.useState)(!1),R=(0,A.useMemo)(()=>(0,a.jsx)(se,{selectedImage:t,isPeekingParent:k,setIsPeekingParent:I,isParentImageLoaded:C,isFinalImageLoaded:E,setIsFinalImageLoaded:z,setIsParentImageLoaded:S}),[t,k,C,E]),P=(0,A.useMemo)(()=>"center"===n&&!m&&!t&&!f&&!d,[n,m,t,f,d]);return(0,A.useEffect)(()=>{if(null==t?void 0:t.url){z(!1);let e=new Image;e.onload=()=>z(!0),e.src=t.url}},[null==t?void 0:t.url]),(0,A.useEffect)(()=>{if(null==t?void 0:t.parentImageUrl){S(!1);let e=new Image;e.onload=()=>S(!0),e.src=null==t?void 0:t.parentImageUrl}},[null==t?void 0:t.parentImageUrl]),(0,A.useEffect)(()=>{w&&(N(!1),eu.oR.message((0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-fg-primary font-bold",children:b("image-editor-welcome.title","Welcome to Image Editor")}),(0,a.jsx)("p",{className:"text-fg-secondary",children:b("image-editor-welcome.description","A focused space for you to transform images with Grok to anything you can imagine.")})]}),{duration:7e3}))},[w,N,b]),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-between w-full h-full relative @container",children:[(0,a.jsxs)("div",{className:(0,y.cn)("flex flex-col gap-8 w-full mb-6 sm:mb-10",{"sm:mb-0":o&&!t}),children:[!o&&(0,a.jsx)(so,{selectedImage:t,title:l,isSending:u,onRegenerate:p||(()=>{}),onClose:j}),t&&s.length>1&&(0,a.jsxs)("div",{className:"w-full h-[88px] @lg:h-auto relative @lg:absolute @lg:w-auto @lg:right-0 @lg:bottom-0 @lg:top-14 grid place-items-center @lg:mx-0",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 -right-3 bg-gradient-to-l w-8 @lg:bottom-auto @lg:right-0 @lg:left-0 @lg:w-full @lg:-top-3 @lg:h-8 @lg:bg-gradient-to-b from-surface-l1 via-surface-l1 dark:from-surface-inset dark:via-surface-inset to-transparent z-40"}),(0,a.jsx)("div",{className:"absolute inset-y-0 -left-3 bg-gradient-to-r w-8 @lg:top-auto  @lg:right-0 @lg:left-0 @lg:w-full @lg:-bottom-3 @lg:h-8 @lg:bg-gradient-to-t from-surface-l1 via-surface-l1 dark:from-surface-inset dark:via-surface-inset to-transparent z-40"}),s.length>1&&(0,a.jsx)(sd,{images:s,selectedImageId:t.id,onSelect:x||(()=>{})})]})]}),f||m&&!t?(0,a.jsx)(e7.$,{}):t?R:(0,a.jsx)("div",{className:"w-full h-full max-w-7xl",children:(0,a.jsx)(sl,{onUploadImage:v||(()=>{}),children:P&&(0,a.jsx)("div",{className:"w-full max-w-xl",children:(0,a.jsx)(sv,{selectedImage:t,isWaitingForResponse:f,isStreaming:m,isSending:u,isAborting:c,inputValue:i||"",onInputValueChange:r||(()=>{}),onSend:h||(()=>{}),onAbort:g||(()=>{})})})})}),!P&&(0,a.jsx)("footer",{className:"relative w-full max-w-2xl h-16 flex-shrink-0 mt-12 sm:mt-20",children:(0,a.jsxs)("div",{className:"absolute bottom-0 inset-x-0 flex flex-col gap-4",children:[!!t&&(0,a.jsx)(sx,{isStreaming:m,isSending:u,selectedImage:t,onSend:h||(()=>{})}),!d&&(0,a.jsx)(sv,{selectedImage:t,isWaitingForResponse:f,isSending:u,isStreaming:m,isAborting:c,inputValue:i||"",onInputValueChange:r||(()=>{}),onSend:h||(()=>{}),onAbort:g||(()=>{})})]})})]})};var sb=t(35501),sy=t(15041);let sw=()=>{let{push:e}=(0,b.wK)(),{t:s}=(0,_.Bd)("base"),{ASSET_SERVER_URL:t}=(0,e5.v)(),l=(0,h.h)(),n=(0,p._)(),r=(0,X.R)(e=>e.loadRecent),o=(0,i.aP)(R.A("streamedMessageId")),d=(0,i.aP)(R.A("setConversationId")),c=(0,i.aP)(R.A("setStreamedMessageId")),u=(0,e2.A3)(R.A("byId")),f=(0,e2.A3)(e=>e.byId[null!=o?o:""]),[x,g]=(0,A.useState)(!1),[v,j]=(0,A.useState)(!1),[y,w]=(0,A.useState)(""),[N,k]=(0,A.useState)([]),[C,S]=(0,A.useState)(null),[E,z]=(0,A.useState)(!1),[P,M]=(0,A.useState)(!1),[T,D]=(0,A.useState)(!1),B=(0,A.useMemo)(()=>N.find(e=>e.id===C)||null,[N,C]),F=(0,A.useCallback)(e=>{let a=e2.A3.getState().byId[e.parentResponseId||""],l="streaming"===e.state;return Object.entries(e.streamingImageById||{}).map(i=>{let[n,r]=i,o=Object.keys(r).map(Number),d=r[Math.max(...o)];return{id:n,url:(0,e1.sU)(t,d.imageUrl),state:l?"streaming":"completed",isModerated:!1,title:(null==a?void 0:a.imageEditUri)?s("image-editor.edited-image","Edited image"):s("image-editor.generated-image","Generated image"),description:null==a?void 0:a.message,regenResponseId:null==a?void 0:a.responseId,progressMap:l?o.map(e=>({progress:e/100,imageUrl:(0,e1.sU)(t,r[e].imageUrl)})):void 0,generatedImageWidth:l?e.generatedImageWidth:void 0,generatedImageHeight:l?e.generatedImageHeight:void 0}})},[t,s]),U=(0,A.useCallback)(e=>{e.length&&k(s=>{if(s.find(e=>e.id.includes("optimistic-streaming-image"))){let a=s.filter(e=>!e.id.includes("optimistic-streaming-image")).concat(e);if(!a.some(e=>e.id===C)){var t;S((null==(t=a[a.length-1])?void 0:t.id)||null)}return a}{let t=s.map(s=>e.find(e=>e.id===s.id)||s),a=e.filter(e=>!t.some(s=>s.id===e.id));return[...t,...a]}})},[k,C]),O=(0,A.useCallback)(s=>{var t;let{image:a,type:l}=s;return"upload"===l?n("image_editor_upload",void 0,{location:"empty-image-workbench"}):"draw"===l&&n("image_editor_draw",void 0,{location:"empty-image-workbench"}),e({page:"files",fileId:null!=(t=a.fileMetadataId)?t:null,emptyView:"default"}),r()},[e,r,n]),G=(0,A.useCallback)(()=>{e({page:"files",fileId:null,emptyView:"default"})},[e]),L=(0,A.useCallback)(e=>{let s=e3.C$.getState(),t=i.aP.getState();"none"!==t.reasoningMode&&t.setReasoningMode("none");let a={message:e,toolOverrides:{imageGen:!0},enableRetries:l.ENABLE_AUTO_STREAM_RETRY};return n("image_editor_generate",void 0,{location:"empty-image-workbench",message:e,messageLength:String(e.length)}),g(!0),M(!1),D(!0),w(""),t.establishNewConversation({...a,temporary:s.isIncognito,disableToolComposer:!0,toolOverrides:{imageGen:!0},ff:l})},[l,w,n]),W=(0,A.useCallback)(async e=>(j(!0),e().then(()=>{d(void 0),c(void 0),g(!1),k([]),S(null),z(!1)}).finally(()=>{j(!1)})),[d,c]),H=(0,sy.m)("empty-image-workbench:handleAbort",W),V=(0,A.useCallback)(()=>{T&&(D(!1),eu.oR.error(s("image-editor.failed-to-generate","Failed to generate image"))),d(void 0),g(!1),j(!1),k([]),S(null),z(!1)},[s,d,T]);return(0,A.useEffect)(()=>{if(!P)if(f&&"streaming"===f.state){let e=F(f);if(!f.imageAttachmentCount||e.length||E)(null==e?void 0:e.length)&&(U(e),g(!1));else{let e=Array.from({length:f.imageAttachmentCount}).map((e,t)=>({id:"optimistic-streaming-image-".concat(t),url:"",state:"streaming",isModerated:!1,title:s("image-editor.generated-image","Generated image"),description:f.message,progressMap:[],generatedImageWidth:f.generatedImageWidth,generatedImageHeight:f.generatedImageHeight}));k(s=>[...s,...e]),S(e[0].id),z(!0)}}else if(f&&("error"===f.state||f.error))V();else{z(!1);let s=[];if(f&&"closed"===f.state){var t,a,l,i;s=F(f);let n=null==(i=f.streamingImageById)||null==(a=i[null==(l=Object.keys(f.streamingImageById||{}))?void 0:l[0]])||null==(t=a[100])?void 0:t.assetId;s.length>0&&!P&&n&&(M(!0),r().then(()=>(d(void 0),c(void 0),e({page:"files",fileId:n}))).catch(V))}U(s)}},[f,F,U,k,s,x,E,C,u,P,V,e,r,d,c]),(0,a.jsx)(e4.YZ,{direction:"horizontal",autoSaveId:"workbench",className:"bg-surface-l1 dark:bg-surface-inset",children:(0,a.jsx)(e4.Zk,{order:1,minSize:50,defaultSize:100,className:"flex flex-col max-h-[100vh] h-[100vh]",children:(0,a.jsxs)("div",{className:"flex flex-col h-full max-h-full",children:[(0,a.jsx)("div",{className:"h-12 min-h-12 flex items-center justify-end px-4",children:(0,a.jsx)(m.$n,{"aria-label":s("image-editor.close","Close Image Editor"),variant:"ghostSecondary",size:"iconMd",rounded:!0,onClick:G,children:(0,a.jsx)(I.uv5,{className:"size-5"})})}),(0,a.jsx)("div",{className:"flex-1 relative overflow-hidden",children:(0,a.jsx)("div",{className:"w-full max-w-full relative h-full max-h-full",children:(0,a.jsx)(e6.t,{fallbackRender:()=>(0,a.jsx)(sb.f,{}),children:(0,a.jsx)("div",{className:"flex flex-col h-full max-h-full p-2 lg:p-6 pt-8 w-full bg-surface-l1 dark:bg-surface-inset",children:(0,a.jsx)(sj,{queryBarPosition:"center",isStreaming:!!f&&"streaming"===f.state,selectedImage:B,images:N,isWaitingForResponse:x,isAborting:v,inputValue:y,hideHeader:!0,onImageSelect:e=>S(e.id),onInputValueChange:w,onSendQuery:L,onImageUpload:O,onAbort:H,onClose:G})})})})})]})})})};var sN=t(15665),sk=t(77204),sI=t(20269),sC=t(1729),sS=t(52542),sE=t(51789),sz=t(3209),sR=t(26676),sA=t(7658),s_=t(3683);function sP(e){let{asset:s,size:t="iconMd"}=e,{t:l}=(0,_.Bd)("files"),i=(0,s_.M)(e=>e.listStatus),n=(0,s_.M)(e=>e.loadFirstPage);(0,A.useEffect)(()=>{"ready"!==i&&n()},[i,n]);let r=(0,s_._)(),{add:o}=(0,sz.O)(),d=(0,A.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),o().catch((0,en.HX)("add-to-workspace-button:create-workspace"))},[o]);return(0,a.jsxs)(es.rI,{children:[(0,a.jsx)(es.ty,{asChild:!0,children:(0,a.jsx)(m.gx,{variant:"ghost",rounded:!0,size:t,tooltipContent:l("add-to-project-button.tooltip","Add to Project"),children:(0,a.jsx)(I.XRf,{size:18})})}),(0,a.jsxs)(es.SQ,{className:"w-[250px] p-2 rounded-3xl flex flex-col gap-0.5 z-[50]",sideOffset:0,children:[!(null==r?void 0:r.length)&&(0,a.jsx)(sE.C,{content:l("No projects yet","No projects yet"),ctaText:l("Create Project","Create Project"),onClickCta:d},"no-workspaces"),r.length&&(0,a.jsx)("div",{className:(0,y.cn)("py-1 pl-2 text-sm text-secondary font-semibold sticky top-0"),children:l("add-to-project-menu-item","Add to Project")}),r.map(e=>(0,a.jsx)(sM,{workspaceId:e.workspaceId,asset:s},e.workspaceId))]})]},"add-to-workspace-button")}function sM(e){var s;let{workspaceId:t,asset:l}=e,i=(0,p._)(),n=(0,s_.M)(e=>{var s;return null==(s=e.byId[t])?void 0:s.data}),{mutate:r,error:o}=(0,sA.mT)(t);(0,ss.Y)("attach-dropdown:attachAsset",o);let{data:d}=(0,sA.UL)(t),c=null==d||null==(s=d.assets)?void 0:s.some(e=>e.assetId===l.assetId),u=(0,A.useCallback)(e=>{l.assetId&&(r({assetId:l.assetId}),i("add_to_workspace",void 0,{location:"add-to-workspace-button",workspaceId:t,assetId:l.assetId}))},[r,l,i,t]);return(0,a.jsxs)(m.$n,{className:(0,y.cn)("group/conversation-item pl-2 pr-1 py-1 text-sm","w-full flex flex-row gap-2 text-primary","rounded-2xl"),variant:"ghost",onClick:u,disabled:c,children:[(0,a.jsx)(sR.n,{icon:null==n?void 0:n.icon,sizeClass:"size-4",rounded:!0,buttonSize:"iconXs",disabled:!0}),(0,a.jsx)("span",{className:(0,y.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden text-left"),style:{maskImage:v.uU,WebkitMaskImage:v.uU},children:null==n?void 0:n.name})]})}var sT=t(50672),sD=t(42143),sB=t(48756),sF=t(85255),sU=t(62454),sO=t(30964),sG=t(87549),sL=t(52371);function sW(e){let{mode:s,setMode:t}=e,{t:l}=(0,_.Bd)("chat");return(0,a.jsx)(sL.tU,{className:"flex-1 flex-row justify-start flex no-a11y-check",defaultValue:"code",value:s,onValueChange:e=>t(e),children:(0,a.jsxs)(sL.j7,{children:[(0,a.jsxs)(sL.Xi,{className:"gap-1",value:"code","aria-label":l("Code","Code"),children:[(0,a.jsx)(I.CyN,{className:"size-4"}),(0,a.jsx)("span",{className:"hidden md:inline",children:l("Code","Code")})]}),(0,a.jsx)(sL.Xi,{className:"gap-1",value:"preview","aria-label":l("Preview","Preview"),children:(0,a.jsx)("span",{className:"hidden md:inline",children:l("Preview","Preview")})})]})})}var sH=t(69580);let sV=e=>{let{mimetype:s,content:t}=e;if("text/html"===s)return(0,a.jsx)(sH.Z,{srcDoc:t,autofocus:!0})};var s$=t(8800);let sK=e=>{let{code:s,mimetype:t,consoleRef:a}=e,l=(0,A.useRef)([]),{t:i}=(0,_.Bd)(["chat"]),n=i("code-execution.done","Done"),r=(0,sC.I5)(t),{runCode:o,loading:d,result:c,codeExecutionAvailable:u}=(0,s$.P)(s,r);(0,A.useEffect)(()=>{var e;null==(e=a.current)||e.reset()},[a,s]);let m=(0,A.useCallback)(()=>{var e;null==(e=a.current)||e.reset(),l.current=[],o()},[a,o]);return(0,A.useEffect)(()=>{var e,s,t,i,r,o,d,u;if(!c)return;let{stdout:m,stderr:f,outputFiles:x,success:h}=c;m&&!l.current.includes(m)&&(null==(e=a.current)||e.open(),l.current.push(m),null==(s=a.current)||s.addMessage({type:"log",message:m})),f&&!l.current.includes(f)&&(null==(t=a.current)||t.open(),l.current.push(f),null==(i=a.current)||i.addMessage({type:"error",message:f,disableFixButton:!0}));let p=Object.values(x).join(",");x&&Object.values(x).length>0&&!l.current.includes(p)&&(null==(r=a.current)||r.open(),l.current.push(p),null==(o=a.current)||o.addMessage({type:"log",files:x})),h&&!l.current.includes(n)&&0===l.current.length&&(null==(d=a.current)||d.open(),l.current.push(n),null==(u=a.current)||u.addMessage({type:"system",message:n}))},[a,c,n]),{runCode:m,isCodeRunning:d,codeExecutionResult:c,isCodeExecutionAvailable:u()}},sq=e=>{let{mimetype:s,isCodeExecutionAvailable:t}=e;return t?"run":["text/html"].includes(s)?"preview":"none"},sX={size:18,strokeWidth:2};var sQ=t(87853),sJ=t(69473),sY=t(66408),sZ=(0,t(70402).A)(function(e,s){return s instanceof e||null!=s&&(s.constructor===e||"Object"===e.name&&"object"==typeof s)});function s0(e){return null!=e}var s1=t(4357),s2=t(49042),s3=t(48085);let s4={size:18,strokeWidth:2};var s5=t(1451);t(23332);var s6=t(58192),s8=t(36889),s9=t(52265);let s7=e=>{let{file:s,content:t}=e,a=(0,p._)(),{ASSET_SERVER_URL:l}=(0,e5.v)(),i=(0,e1.sU)(l,s.fileUri);return{handleDownload:(0,A.useCallback)(()=>{if(i||t)if(a("file_content_download_click","",{location:"spreadsheet-workbench:useFileActions:handleDownload",contentType:s.fileMimeType}),t){let e=new Blob([t],{type:s.fileMimeType});(0,s9.W)(e,s.fileName)}else i&&(0,s9.z)(i,s.fileName)},[a,i,t,s.fileName,s.fileMimeType])}},te={size:18,strokeWidth:2};var ts=t(61884),tt=t(47934);function ta(e){let{asset:s}=e,t=(0,$.B)(s),{t:l}=(0,_.Bd)("files"),{ASSET_SERVER_URL:i}=(0,e5.v)(),n=(0,p._)(),r=(0,A.useCallback)(()=>{var e,t,a,l,r;n("file_content_download_click",void 0,{location:"unknown-workbench",contentType:null!=(t=s.mimeType)?t:"unknown",assetId:null!=(a=s.assetId)?a:"",assetName:null!=(l=s.name)?l:"",assetSize:null!=(r=null==(e=s.sizeBytes)?void 0:e.toString())?r:""});let o=(0,e1.sU)(i,s.key);if(!o)return;let d=document.createElement("a");d.href=o,d.download="file",document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(o)},[n,i,s]),o=l("read-only-indicator-tooltip","Grok can't edit this type of file but can still answer questions about it");return(0,a.jsx)(sO.U,{editor:(0,a.jsx)(sJ.H,{hideEdit:!0,fileMetadata:t,onClose:()=>{},className:"border-none shadow-none max-w-none"}),assetId:s.assetId,conversationId:s.currentConversationId,editorHeader:(0,a.jsx)(sD.F,{asset:s}),headerButtons:[(0,a.jsx)(m.gx,{tooltipContent:l("Download to file","Download to file"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:r,rounded:!0,variant:"ghost",size:"iconSm","aria-label":l("Download to file","Download to file"),children:(0,a.jsx)(I.s3U,{strokeWidth:2,size:18})},"download-button")],chat:(0,a.jsx)(tt.s,{asset:s}),chatHeader:(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("div",{className:"text-secondary",children:l("files-tab-conversation-header","File Chat")}),(0,a.jsxs)(ts.m_,{children:[(0,a.jsx)(ts.k$,{asChild:!0,children:(0,a.jsx)("span",{"aria-label":o,children:(0,a.jsx)(I.hED,{className:"w-4 h-4"})})}),(0,a.jsx)(ts.ZI,{children:o})]})]})})}let tl={markdown:function(e){var s;let{asset:t}=e,l=(0,h.h)(),{t:i}=(0,_.Bd)("files"),[n,r]=(0,A.useState)(!1),{content:o,setContent:d,error:c,isEditing:u,refetch:x}=(0,sT.W)(t,n),{handleCopy:p,copyPressed:g,handleDownload:v,shareLoading:j,handleShare:b,sharePressed:w}=(0,sF.H)({assetId:t.assetId,content:null!=o?o:"",filename:null!=(s=t.name)?s:"file"}),{activeArtifact:N,isEditing:k,onSetActiveArtifact:C}=(0,sU.a)({content:null!=o?o:void 0});(0,A.useEffect)(()=>{r(k)},[k]);let S=(0,s2.l)({content:o,isEditable:!0,onUpdate:d});return null==o?(0,a.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,a.jsx)(eF.E,{className:"w-[30%] h-6"}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,a.jsx)(eF.E,{className:"w-24 h-6"}),(0,a.jsx)(eF.E,{className:"w-6 h-6"}),(0,a.jsx)(eF.E,{className:"w-6 h-6"}),(0,a.jsx)(eF.E,{className:"w-6 h-6"}),(0,a.jsx)(eF.E,{className:"w-6 h-6"}),(0,a.jsx)(eF.E,{className:"w-6 h-6"}),(0,a.jsx)(eF.E,{className:"w-6 h-6"})]}),(0,a.jsx)("div",{className:"flex flex-col gap-4 w-full h-full justify-center items-center py-[10%]",children:(0,a.jsxs)("div",{className:"flex flex-col h-full w-full max-w-3xl gap-2",children:[(0,a.jsx)(eF.E,{className:"w-full max-w-xl mb-2 h-8"}),(0,a.jsx)(eF.E,{className:"w-full max-w-3xl h-6"}),(0,a.jsx)(eF.E,{className:"w-full max-w-2xl h-6"}),(0,a.jsx)(eF.E,{className:"w-full max-w-xl h-6"}),(0,a.jsx)(eF.E,{className:"w-full max-w-3xl h-6"}),(0,a.jsx)(eF.E,{className:"w-full max-w-2xl h-6"}),(0,a.jsx)(eF.E,{className:"w-full max-w-3xl h-6"}),(0,a.jsx)(eF.E,{className:"w-full max-w-2xl h-6"}),(0,a.jsx)(eF.E,{className:"w-full max-w-3xl h-6"}),(0,a.jsx)(eF.E,{className:"w-full max-w-xl h-6"}),(0,a.jsx)(eF.E,{className:"w-full max-w-xl h-6"}),(0,a.jsx)(eF.E,{className:"w-full max-w-sm h-6"})]})})]}):c?(0,a.jsx)(sb.f,{onRetryRequested:x}):(0,a.jsx)(sO.U,{editor:(0,a.jsxs)("div",{className:(0,y.cn)("no-a11y-check h-full overflow-auto max-w-full relative prose bg-surface-l1 dark:bg-surface-inset","\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:text-primary/20\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:text-3xl\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:font-bold\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:content-[attr(data-placeholder)]\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:float-left\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:h-0\n  [&_.tiptap_h1.is-editor-empty:first-child::before]:pointer-events-none\n"),children:[S&&null!==o?(0,a.jsx)(s1.n,{editor:S,content:o,editable:!u,className:"max-w-3xl h-full justify-self-center"}):null,u?(0,a.jsx)("div",{className:"sticky overflow-visible bottom-4 start-0 w-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-primary bg-surface-l1 px-4 py-2 rounded-full h-10 border border-border",children:[(0,a.jsx)(f.y,{size:"sm"}),(0,a.jsx)("span",{children:i("files.editing-by-model","Editing...")})]})}):null]}),assetId:t.assetId,conversationId:t.currentConversationId,editorHeader:(0,a.jsx)(sD.F,{asset:t}),editorSubheader:S?(0,a.jsx)(s3.n,{editable:!0,editor:S}):null,headerButtons:[(0,a.jsx)(m.gx,{tooltipContent:i("Copy Contents","Copy Contents"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:p,rounded:!0,variant:"ghost",size:"iconSm","aria-label":i("Copy Contents","Copy Contents"),children:(0,a.jsx)(sr.p,{children:g?(0,a.jsx)(I.Srz,{size:18}):(0,a.jsx)(I.TdU,{size:18})},g?"copied":"copy")},"copy-button"),(0,a.jsx)(m.gx,{tooltipContent:i("Download to file","Download to file"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:v,rounded:!0,variant:"ghost",size:"iconSm","aria-label":i("Download to file","Download to file"),children:(0,a.jsx)(I.KXi,{...s4,size:18})},"download-button"),l.ENABLE_FILE_SHARING?(0,a.jsx)(m.gx,{tooltipContent:i("Share file","Share file"),onClick:b,tooltipContentProps:{className:"text-xs"},variant:"ghost",size:"iconSm","aria-label":i("Share file","Share file"),rounded:!0,children:(0,a.jsx)(sr.p,{children:j?(0,a.jsx)(f.y,{size:"xs"}):w?(0,a.jsx)(I.Srz,{size:18}):(0,a.jsx)(I.liv,{...s4,size:18})},j?"share-loading":w?"shared":"share")},"share-button"):null],chat:(0,a.jsx)(sB.s,{asset:t,activeArtifact:N,onArtifactSelected:C})})},csv:sQ.s1,spreadsheet:function(e){var s;let{asset:t}=e,{t:l}=(0,_.Bd)("files"),i=(0,h.h)(),n=(0,$.B)(t),{ASSET_SERVER_URL:r}=(0,e5.v)(),o=(0,X.R)(e=>e.setAssetContent),d=(0,X.fh)(null!=(s=t.assetId)?s:"","binary"),c=(0,X.R)(e=>e.fetchBinaryContent);(0,A.useEffect)(()=>{null==d&&t.assetId&&c(t.assetId,r)},[r,t.assetId,d,c]);let u=(0,A.useCallback)(e=>{var s;o(null!=(s=t.assetId)?s:"",e)},[t.assetId,o]),{handleDownload:f}=s7({file:n,content:d});if(!t.assetId)return(0,a.jsx)(sb.f,{});let x=t.rootAssetId||t.assetId;return(0,a.jsx)(sO.U,{editor:(0,a.jsx)("div",{className:"flex flex-col h-full overflow-hidden",children:(0,a.jsx)(s8.bs,{id:x,initialState:{name:t.name||"Workbook"},content:d,readOnly:!i.ENABLE_XLSX_EDITING,children:void 0!==d?(0,a.jsx)(s5.y,{readOnly:!i.ENABLE_XLSX_EDITING,onContentUpdate:u,className:"border-t border-border-l1",autoFocus:!0}):null},x)}),assetId:t.assetId,conversationId:t.currentConversationId,editorHeader:(0,a.jsx)(sD.F,{asset:t}),headerButtons:[(0,a.jsx)(m.gx,{tooltipContent:l("Download to file","Download to file"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:f,rounded:!0,variant:"ghost",size:"iconSm","aria-label":l("Download to file","Download to file"),disabled:!d,children:(0,a.jsx)(I.s3U,{...te,size:18})},"download-button")],chat:(0,a.jsx)(sB.s,{asset:t,restrictedModel:s6.E8})})},image:function(e){let{asset:s}=e,{t}=(0,_.Bd)("base"),{ASSET_SERVER_URL:l}=(0,e5.v)(),n=(0,h.h)(),[r]=(0,e8.Mj)("files-tab-is-chat-open",!0),o=(0,p._)(),{handleEditorOpen:d,consumeEditorTimeMs:c}=(0,sY.Q)(),{editImagePresets:u}=(0,sc.F)(),x=(0,X.R)(e=>e.loadRecent),g=(0,X.R)((0,eN.k)(e=>e.assetsById)),v=(0,X.R)((0,eN.k)(e=>e.listStatus)),j=(0,e2.A3)(R.A("byId")),b=(0,i.aP)(R.A("conversationId")),y=(0,i.aP)(R.A("streamedMessageId")),w=(0,i.aP)(R.A("queryByConversationId")),N=(0,i.aP)(R.A("idsetQueryByConversationId")),[k,C]=(0,A.useState)(!1),[E,z]=(0,A.useState)(!1),[P,M]=(0,A.useState)(!1),[T,D]=(0,A.useState)(!1),[B,F]=(0,A.useState)(null),[U,O]=(0,A.useState)(null),[G,L]=(0,A.useState)([]),[W,H]=(0,A.useState)(null),[V,K]=(0,A.useState)(null),q=(0,A.useRef)(null),J=(0,A.useMemo)(()=>(0,$.B)(s),[s]),Y=(0,A.useMemo)(()=>{if(!s.currentConversationId)return[];let e=[];return Object.values(g).map(e=>null==e?void 0:e.data).filter(s0).forEach(t=>{var a;(null==(a=t.mimeType)?void 0:a.startsWith("image/"))&&t.sourceConversationId===s.currentConversationId&&e.push(t)}),e.sort((e,s)=>new Date(e.createTime||"").getTime()-new Date(s.createTime||"").getTime())},[s,g]),Z=b||"no_conversation_id",ee=w[Z],es=(0,A.useCallback)(e=>N(e,Z),[Z,N]),et=(0,A.useMemo)(()=>G.find(e=>e.id===U)||null,[G,U]),ea=(0,A.useMemo)(()=>{let e=Y.find(e=>e.assetId===B);return e||s},[s,B,Y]),el=(0,e2.A3)(e=>e.byId[null!=y?y:""]),ei=(0,A.useCallback)(e=>{e2.A3.getState().byId[e.parentResponseId||""];let s="streaming"===e.state;return Object.entries(e.streamingImageById||{}).map(t=>{let[a,i]=t,n=Object.keys(i).map(Number),r=i[Math.max(...n)];return{id:a,url:(0,e1.sU)(l,r.imageUrl),state:s?"streaming":"completed",isModerated:!1,responseId:e.responseId,progressMap:s?n.map(e=>({progress:e/100,imageUrl:(0,e1.sU)(l,i[e].imageUrl)})):void 0,generatedImageWidth:s?e.generatedImageWidth:void 0,generatedImageHeight:s?e.generatedImageHeight:void 0}})},[l]),er=(0,A.useCallback)(e=>{e.length&&L(s=>{if(s.find(e=>e.id.includes("optimistic-streaming-image"))){let a=s.filter(e=>!e.id.includes("optimistic-streaming-image")).concat(e);if(!a.some(e=>e.id===U)){var t;O((null==(t=a[a.length-1])?void 0:t.id)||null)}return a}{let t=s.map(s=>e.find(e=>e.id===s.id)||s),a=e.filter(e=>!t.some(s=>s.id===e.id));return[...t,...a]}})},[L,U]),eo=(0,A.useCallback)(e=>{if(!et)return;let s=e2.A3.getState(),t=e3.C$.getState(),a=i.aP.getState(),l=a.lastMessageId?s.byId[a.lastMessageId]:void 0;if(a.lastMessageId&&!l)throw Error("Last message is missing");"none"!==a.reasoningMode&&a.setReasoningMode("none");let r={message:e,toolOverrides:{imageGen:!0},imageEditUri:et.url?et.url.replace(/^https?:\/\/[^/]+\/?/,""):void 0,enableRetries:n.ENABLE_AUTO_STREAM_RETRY};if(et.url){let s=u.flatMap(e=>e.presets).find(s=>s.prompt===e);o("edit_image_start",(0,sY.r)(et.url),{queryType:s?"preset":"manual",location:"image-workbench",presetId:(null==s?void 0:s.presetId)||"",message:e,messageLength:String(e.length)})}return z(!0),es(""),a.conversationId?a.sendResponse({...r,parentResponseId:a.lastMessageId,conversationId:a.conversationId,webpageUrls:[],setOpimisticUserResponse:!0,setUserResponse:!0,disableToolComposer:!0,isFromGrokFiles:!0,fileAttachmentIds:[ea.assetId],ff:n}):a.establishNewConversation({...r,temporary:t.isIncognito,disableToolComposer:!0,isFromGrokFiles:!0,fileAttachmentIds:[ea.assetId],ff:n})},[et,n,es,ea.assetId,o,u]);(0,A.useCallback)(()=>{let e=j[(null==et?void 0:et.regenResponseId)||""];if(e)return eo(e.message)},[et,j,eo]);let ed=(0,A.useCallback)(async e=>(M(!0),e().finally(()=>{M(!1)})),[]),ec=(0,sy.m)("image-workbench:handleAbort",ed),eu=(0,A.useCallback)(()=>{var e;!k&&(null==et?void 0:et.url)&&(C(!0),(0,sn.G)(et.url,null==(e=et.url)?void 0:e.split("/").pop()).catch((0,en.HX)("image-editor:handleDownload")).finally(()=>C(!1)))},[k,et]),em=(0,A.useCallback)(()=>{q.current&&n.ENABLE_IMAGE_EDITOR_IN_FILES&&(o("image_editor_close",void 0,{timeInEditorMs:String(c()),location:"image-workbench"}),q.current=null)},[c,o,n.ENABLE_IMAGE_EDITOR_IN_FILES]);(0,A.useEffect)(()=>{if(el&&"streaming"===el.state&&el.conversationId===b){let e=ei(el);if(!el.imageAttachmentCount||e.length||T)(null==e?void 0:e.length)&&(er(e),z(!1));else{let e=Array.from({length:el.imageAttachmentCount}).map((e,s)=>({id:"optimistic-streaming-image-".concat(s),url:"",state:"streaming",isModerated:!1,responseId:el.responseId,progressMap:[],generatedImageWidth:el.generatedImageWidth,generatedImageHeight:el.generatedImageHeight}));L(s=>[...s,...e]),O(e[0].id),D(!0)}}else{z(!1),D(!1);let e=[];el&&"closed"===el.state&&!el.error&&el.conversationId===b&&(e=ei(el),W!==el.responseId&&(H(el.responseId),x().catch((0,en.HX)("image-editor:loadRecent")))),el&&("error"===el.state||el.error)||!el?L(e=>{if(!e.find(e=>e.id.includes("optimistic-streaming-image")))return e;{let t=e.filter(e=>!e.id.includes("optimistic-streaming-image"));if(!t.some(e=>e.id===U)){var s;O((null==(s=t[t.length-1])?void 0:s.id)||null)}return t}}):er(e)}},[el,ei,er,L,t,E,T,j,U,x,W,s.assetId,Y,b]);let ef=(0,A.useCallback)(async()=>{let e=e2.A3.getState();if(s.currentConversationId){let t=[null==s?void 0:s.responseId,...Y.map(e=>null==e?void 0:e.responseId)].filter(sZ(String)),a=await e.loadResponses(s.currentConversationId,t),i=a.find(e=>(null==e?void 0:e.responseId)===(null==s?void 0:s.responseId)),n=i?e.byId[i.parentResponseId||""]:void 0,r=(0,$.B)(s);return[{id:s.assetId||"",state:"completed",isModerated:!1,url:(0,e1.sU)(l,r.fileUri||""),responseId:s.responseId,parentImageUrl:(null==n?void 0:n.imageEditUri)?(0,e1.sU)(l,n.imageEditUri):void 0},...Y.sort((e,s)=>new Date(e.createTime||"").getTime()-new Date(s.createTime||"").getTime()).map(e=>{let s=(0,$.B)(e),t=a.find(s=>(null==s?void 0:s.responseId)===(null==e?void 0:e.responseId)),i=t?a.find(e=>(null==e?void 0:e.responseId)===(null==t?void 0:t.parentResponseId)):void 0;return{id:e.assetId||"",state:"completed",isModerated:!1,url:(0,e1.sU)(l,s.fileUri||""),responseId:e.responseId,parentImageUrl:(null==i?void 0:i.imageEditUri)?(0,e1.sU)(l,i.imageEditUri):void 0}})]}if(s.sourceConversationId){let t=[null==s?void 0:s.responseId].filter(sZ(String)),a=await e.loadResponses(s.sourceConversationId,t),i=(0,$.B)(s),n=a.find(e=>(null==e?void 0:e.responseId)===(null==s?void 0:s.responseId)),r=n?a.find(e=>(null==e?void 0:e.responseId)===(null==n?void 0:n.parentResponseId)):void 0;return[{id:s.assetId||"",state:"completed",isModerated:!1,url:(0,e1.sU)(l,i.fileUri||""),responseId:s.responseId,parentImageUrl:(null==r?void 0:r.imageEditUri)?(0,e1.sU)(l,r.imageEditUri):void 0}]}{let e=(0,$.B)(s);return[{id:s.assetId||"",state:"completed",isModerated:!1,url:(0,e1.sU)(l,e.fileUri||""),responseId:s.responseId}]}},[l,s,Y]),ex=(0,A.useCallback)(e=>{var s;if(G.some(s=>s.id===U&&s.responseId===e))return;let t=null==(s=G.find(s=>s.responseId===e))?void 0:s.id;t&&O(t)},[G,U]);return(0,A.useEffect)(()=>{s.assetId&&s.assetId!==V&&"ready"===v&&(q.current&&q.current!==s.assetId&&em(),K(s.assetId),ef().then(e=>{L(e),O(s.assetId),H(null),D(!1),z(!1),M(!1),q.current=s.assetId,d(),n.ENABLE_IMAGE_EDITOR_IN_FILES&&o("image_editor_open",s.assetId,{location:"image-workbench"})}).catch((0,en.HX)("image-editor:getInitialImages")))},[s.assetId,v,V,ef,d,em,o,n.ENABLE_IMAGE_EDITOR_IN_FILES]),(0,A.useEffect)(()=>{if(U&&U!==B){if(U===s.assetId||Y.some(e=>e.assetId===U))F(U);else if(null==et?void 0:et.responseId){var e,t,a;let s=j[(null==et?void 0:et.responseId)||""],l=null==s||null==(a=s.streamingImageById)||null==(t=a[U])||null==(e=t[100])?void 0:e.assetId;l&&F(l)}}},[U,B,s.assetId,Y,j,et]),(0,A.useEffect)(()=>()=>{em()},[em]),n.ENABLE_IMAGE_EDITOR_IN_FILES?(0,a.jsx)(sO.U,{editor:(0,a.jsx)("div",{className:"flex flex-col h-full max-h-full p-2 lg:p-6 pt-8 w-full",children:(0,a.jsx)(sj,{hideHeader:!0,hideQueryBar:r,isStreaming:el&&"streaming"===el.state,selectedImage:et,images:G,isWaitingForResponse:E||!et,isAborting:P,inputValue:ee,onInputValueChange:es,onImageSelect:e=>O(e.id),onSendQuery:eo,onAbort:ec})}),assetId:s.assetId,disableClear:!0,conversationId:s.currentConversationId,editorHeader:(0,a.jsx)(S.N,{mode:"popLayout",children:(null==et?void 0:et.state)==="streaming"?(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},className:"text-lg font-semibold text-primary animate-pulse",children:t("image-editor.generating","Generating")},"streaming-title"):(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},className:"flex-grow",children:(0,a.jsx)(sD.F,{asset:ea,className:"text-lg font-semibold text-primary truncate min-w-0 overflow-hidden"})},el&&"streaming"===el.state?U:ea.assetId)}),headerButtons:[et&&(0,a.jsx)(m.gx,{variant:"ghost",size:"iconSm",rounded:!0,"aria-label":t("image-editor.download-image","Download Image"),tooltipContent:t("image-editor.download-image","Download Image"),tooltipContentProps:{side:"bottom"},disabled:"streaming"===et.state||!et.url||k,onClick:eu,children:(0,a.jsx)(sr.p,{children:k?(0,a.jsx)(f.y,{size:"xs"}):(0,a.jsx)(I.KXi,{className:"size-5"})},k?"is-downloading":"download-icon")},"download")],chat:(0,a.jsx)(sB.s,{asset:s,viewedAssetId:B||void 0,onResponseImagesOpen:ex,responseImagesView:"status-card"},s.assetId)}):(0,a.jsx)("div",{className:"flex flex-col max-h-[100vh] h-[100vh]",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-full bg-surface-base",children:(0,a.jsx)(sJ.H,{hideEdit:!0,fileMetadata:J,onClose:()=>{},className:"border-none shadow-none max-w-none"})})})},code:function(e){var s,t,l;let{asset:i}=e,n=(0,h.h)(),{t:r}=(0,_.Bd)("files"),o=(0,p._)(),[d,c]=(0,A.useState)(!1),{content:u,setContent:x,error:g,isEditing:v,refetch:j}=(0,sT.W)(i,d),b=(0,A.useRef)(null),y=(0,$.B)(i),{activeArtifact:w,isEditing:N,onSetActiveArtifact:k}=(0,sU.a)({content:null!=u?u:void 0});(0,A.useEffect)(()=>{c(N)},[N]);let{runCode:C,isCodeRunning:S,isCodeExecutionAvailable:E}=sK({code:null!=u?u:"",mimetype:null!=(s=y.fileMimeType)?s:"",consoleRef:b}),z=(0,A.useCallback)(()=>{C(),o("files.workbench.run-code","",{location:"code-workbench:onRunCode"})},[C,o]),R=(0,A.useCallback)(e=>{x(null!=e?e:"")},[x]),P=sq({content:null!=u?u:"",mimetype:y.fileMimeType,isCodeExecutionAvailable:E}),{handleCopy:M,copyPressed:T,handleDownload:D,handleShare:B,sharePressed:F,shareLoading:U}=(0,sF.H)({assetId:i.assetId,content:null!=u?u:"",filename:null!=(t=i.name)?t:"file"}),O=(0,sC.I5)(y.fileMimeType),[G,L]=(0,A.useState)("code"),W=(0,A.useCallback)(e=>{L(e),o("files.workbench.set-mode",e,{location:"code-workbench:onSetMode"})},[o]);return((0,A.useEffect)(()=>{L("code")},[i.assetId]),null==u)?(0,a.jsxs)("div",{className:"flex flex-col w-full h-full p-4",children:[(0,a.jsxs)("div",{className:"flex gap-2 items-center justify-between",children:[(0,a.jsx)(eF.E,{className:"w-[30%] h-6"}),(0,a.jsxs)("div",{className:"flex gap-6 me-4",children:[(0,a.jsx)(eF.E,{className:"w-6 h-6"}),(0,a.jsx)(eF.E,{className:"w-6 h-6"}),(0,a.jsx)(eF.E,{className:"w-6 h-6"}),(0,a.jsx)(eF.E,{className:"w-6 h-6"})]})]}),(0,a.jsxs)("div",{className:"flex mt-6 flex-col h-full w-full max-w-3xl gap-3",children:[(0,a.jsx)(eF.E,{className:"w-full max-w-xl h-5"}),(0,a.jsx)(eF.E,{className:"w-full max-w-3xl h-5"}),(0,a.jsx)(eF.E,{className:"w-full max-w-2xl h-5"}),(0,a.jsx)(eF.E,{className:"w-full max-w-xl h-5"}),(0,a.jsx)(eF.E,{className:"w-full max-w-3xl h-5"}),(0,a.jsx)(eF.E,{className:"w-full max-w-2xl h-5"}),(0,a.jsx)(eF.E,{className:"w-full max-w-3xl h-5"}),(0,a.jsx)(eF.E,{className:"w-full max-w-2xl h-5"}),(0,a.jsx)(eF.E,{className:"w-full max-w-3xl h-5"}),(0,a.jsx)(eF.E,{className:"w-full max-w-xl h-5"}),(0,a.jsx)(eF.E,{className:"w-full max-w-xl h-5"}),(0,a.jsx)(eF.E,{className:"w-full max-w-sm h-5"})]})]}):g?(0,a.jsx)(sb.f,{onRetryRequested:j}):(0,a.jsx)(sO.U,{editor:"code"===G?(0,a.jsxs)("div",{className:"flex flex-col h-full overflow-hidden bg-surface-inset",children:[(0,a.jsx)("div",{className:"relative flex-1 h-full overflow-hidden",children:(0,a.jsx)(sG.B,{editable:!0,onContentUpdate:R,isStreaming:v,value:null!=u?u:"",syntax:O})}),(0,a.jsx)(sS.C,{ref:b}),v?(0,a.jsx)("div",{className:"sticky overflow-visible bottom-4 start-0 w-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-primary bg-surface-l1 px-4 py-2 rounded-full h-10 border border-border",children:[(0,a.jsx)(f.y,{size:"sm"}),(0,a.jsx)("span",{children:r("files.editing-by-model","Editing...")})]})}):null]}):(0,a.jsx)(sV,{mimetype:null!=(l=i.mimeType)?l:"unknown",content:null!=u?u:""}),chat:(0,a.jsx)(sB.s,{asset:i,activeArtifact:w,onArtifactSelected:k}),editorHeader:(0,a.jsx)(sD.F,{asset:i}),assetId:i.assetId,conversationId:i.currentConversationId,headerButtons:["preview"===P?(0,a.jsx)(sW,{mode:G,setMode:W}):null,"run"===P?(0,a.jsx)("div",{className:"py-1",children:(0,a.jsxs)(m.$n,{variant:"outline",size:"sm",className:"rounded-full",onClick:z,disabled:S,children:[S?(0,a.jsx)(f.y,{size:"xs"}):(0,a.jsx)(I.udU,{...sX,size:18}),r("code-execution.run","Run")]})}):null,(0,a.jsx)(sP,{asset:i,size:"iconSm"},"add-to-workspace-button"),(0,a.jsx)(m.gx,{tooltipContent:r("Copy Contents","Copy Contents"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:M,rounded:!0,variant:"ghost",size:"iconSm","aria-label":r("Copy Contents","Copy Contents"),children:(0,a.jsx)(sr.p,{children:T?(0,a.jsx)(I.Srz,{size:18}):(0,a.jsx)(I.TdU,{size:18})},T?"copied":"copy")},"copy-button"),(0,a.jsx)(m.gx,{tooltipContent:r("Download to file","Download to file"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},onClick:D,rounded:!0,variant:"ghost",size:"iconSm","aria-label":r("Download to file","Download to file"),children:(0,a.jsx)(I.KXi,{...sX,size:18})},"download-button"),n.ENABLE_FILE_SHARING?(0,a.jsx)(m.gx,{tooltipContent:r("Share file","Share file"),onClick:B,tooltipContentProps:{className:"text-xs"},variant:"ghost",size:"iconSm","aria-label":r("Share file","Share file"),rounded:!0,children:(0,a.jsx)(sr.p,{children:U?(0,a.jsx)(f.y,{size:"xs"}):F?(0,a.jsx)(I.Srz,{size:16}):(0,a.jsx)(I.liv,{...sX,size:18})},U?"share-loading":F?"shared":"share")},"share-button"):null]})},unknown:ta},ti=e=>null===e.selection?{activeSheetId:e.activeSheet}:{selection:{type:"sheet",sheetId:e.activeSheet,range:(0,sk.Hj)(e.selection).text}};function tn(e){var s;let{rootAssetId:t}=e,{t:l}=(0,_.Bd)("files"),{setOpen:n}=(0,sI.cL)(),r=(0,X.R)((0,eN.k)(e=>e.fetchVersions)),o=(0,X.R)(e=>{var s;return null==(s=e.assetsById[t])?void 0:s.status}),d=(0,X.F7)(t),c=(0,sN.F$)();(0,A.useEffect)(function(){return c.updateState(e=>({...e,activeId:t})),()=>{c.updateState(e=>({...e,activeId:null}))}},[t,c]);let u=(0,i.aP)(R.A("setMetadata")),m=c.useState(e=>e.nodes[t]);if((0,A.useEffect)(function(){m&&"sheet"===m.type&&u(ti(m))},[m,u]),(0,A.useEffect)(()=>{r(t)},[t,r]),(0,A.useEffect)(()=>{n(!1)},[]),!d&&"success"===o)return(0,a.jsx)(sb.f,{title:l("file-not-found.title","File not found"),message:l("file-not-found.message","We couldn't find the document. Please verify the link you entered and try again. You can also browse for your files in the Files panel.")});if(!d&&"error"===o)return(0,a.jsx)(sb.f,{});if(!d)return(0,a.jsx)(eB.P,{delayMs:500,children:(0,a.jsx)("div",{className:"flex w-full h-full justify-center items-center",children:(0,a.jsx)(f.y,{})})});let x=null!=(s=tl[(0,eh.qW)(d)])?s:ta;return(0,a.jsx)(x,{asset:d})}function tr(){var e;let s=(0,p._)(),{t}=(0,_.Bd)("files"),{ENABLE_IMAGE_EDITOR_IN_FILES:l}=(0,h.h)(),{route:i,push:r}=(0,b.wK)(),o=(0,g.Di)(),{user:u}=(0,c.wV)(),m="files"===i.page&&null!=(e=i.fileId)?e:void 0,f=(0,X.R)(e=>{var s,t;return m?null==(t=e.assetsById[e.currentVersion[m]])||null==(s=t.data)?void 0:s.name:""}),v=(0,X.R)(e=>e.isFileExplorerCollapsed),j=(0,X.R)(e=>e.setIsFileExplorerCollapsed);if((0,A.useEffect)(()=>{s("files.open",m,{location:"files-page-content:useEffect"})},[m,s]),(0,x.r)(f||t("files-page-title","Files")),(0,e$.v)(eV.Ib,e=>{e.preventDefault(),e.stopPropagation(),r({page:"main"}),s("pressed_cmd_j",void 0,{location:"files-page-content:useHotkeys"})},[s,r]),!u||"files"!==i.page)return(0,a.jsx)(n.default,{});if(o)return(0,a.jsx)(ed,{});let{fileId:y,emptyView:w}=i;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eK.K,{collapsed:v,onCollapsedChange:j,sideContent:(0,a.jsx)(eH,{className:"h-full"}),autoSaveId:"files-page-layout",style:{height:"100vh"},direction:"horizontal",className:"w-full h-[100vh] overflow-hidden",tagName:"main",children:y?(0,a.jsx)(tn,{rootAssetId:y}):"image"===w&&l?(0,a.jsx)(sw,{}):(0,a.jsx)(eY,{})}),(0,a.jsx)(d.CommandMenu,{})]})}var to=t(35228),td=t(90210),tc=t(14461),tu=t(10463),tm=t(76393),tf=t(75036);let tx=e=>{var s,t,l,i,n,r,o,d,c,u,m,x,h,p,v,j,b;let{ticker:y}=e,{data:w,isLoading:N}=(0,tc.F)(y),k=(0,g.Di)(),{i18n:I}=(0,_.Bd)("finance-cards"),C=(0,tf.h)(k,I.language);if(N)return(0,a.jsx)("div",{className:"flex justify-center items-center h-header-height",children:(0,a.jsx)(f.y,{size:"sm"})});let E=null;y in tu.s&&(E=tu.s[y]);let z=Math.abs(null!=(u=null==w||null==(s=w.financeValue)?void 0:s.change)?u:0),R=Math.abs(null!=(m=null==w||null==(t=w.financeValue)?void 0:t.value)?m:0),A=Math.abs(null!=(x=null==w||null==(l=w.financeValue)?void 0:l.changePercent)?x:0),P=(null!=(h=null==w||null==(i=w.financeValue)?void 0:i.change)?h:0)>=0?"+":"-";return(0,a.jsx)("header",{className:"px-4 flex flex-row items-center h-header-height flex justify-between w-full gap-2  relative z-30 flex-shrink-0",children:(0,a.jsxs)(S.N,{mode:"popLayout",children:[(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},className:"w-full overflow-hidden min-w-0 hidden sm:block",children:(0,a.jsxs)("div",{className:"text-lg flex flex-row items-center gap-2",children:[E&&(0,a.jsx)("img",{src:E,alt:y,className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium overflow-hidden text-ellipsis whitespace-nowrap",children:null!=(p=null==w||null==(n=w.stockOverview)?void 0:n.name)?p:y}),"\xb7",(0,a.jsx)("span",{className:"font-medium",children:null!=(v=null==w||null==(r=w.stockOverview)?void 0:r.exchange)?v:""}),"\xb7",(0,a.jsx)("span",{className:"font-medium",children:null!=(j=null==w||null==(o=w.stockOverview)?void 0:o.currency)?j:""}),"\xb7",(0,a.jsx)("span",{className:"font-medium",children:C(null!=(b=null==w||null==(d=w.financeValue)?void 0:d.value)?b:0,null==w||null==(c=w.financeValue)?void 0:c.unit)}),(0,a.jsx)(tm.p,{value:z.toFixed(R<1?3:2),sign:P}),(0,a.jsx)(tm.p,{value:"".concat(A.toFixed(2),"%"),sign:P,prefix:"(",suffix:")"})]})},y),(0,a.jsx)(Q.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},children:(0,a.jsx)(si.w,{variant:"ghost",size:"iconMd",rounded:!0,conversationId:"",responseId:"a",iconProps:{size:20}})},"share")]})})},th=e=>{let{ticker:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col h-full max-h-full",children:[(0,a.jsx)(tx,{ticker:s}),(0,a.jsx)("div",{className:"flex-1 overflow-auto"})]})};function tp(e){let{onRetryRequested:s,title:t,message:l}=e,{t:i}=(0,_.Bd)("finance");return(0,a.jsxs)("div",{className:(0,y.cn)("flex flex-col items-center justify-center h-full w-full p-4"),children:[(0,a.jsx)(I.hcu,{className:"mb-4",size:24}),(0,a.jsx)("h2",{className:"text-md font-semibold mb-2",children:t||i("finance-open-error.title","Could not load page")}),(0,a.jsx)("p",{className:"text-sm text-fg-secondary mb-4 text-center max-w-sm",children:l||i("finance-open-error.message","Something went wrong while trying to load the page.")}),s&&(0,a.jsxs)(m.$n,{variant:"outline",size:"md",onClick:s,className:"flex items-center gap-2",children:[(0,a.jsx)(I.e9t,{size:16,className:"text-fg-secondary"}),(0,a.jsx)("span",{className:"text-fg-primary font-semibold",children:i("file-open-error.retry","Retry")})]})]})}function tg(e){let{ticker:s,conversationId:t=null}=e,{t:l}=(0,_.Bd)("finance-cards"),i=(0,ew.dc)({conversationId:t});return(0,a.jsxs)(e4.YZ,{direction:"horizontal",autoSaveId:"finance-workbench",className:"bg-surface-l1 dark:bg-surface-inset",children:[(0,a.jsx)(e4.Zk,{order:1,minSize:50,defaultSize:100,className:"flex flex-col max-h-[100vh] h-[100vh]",children:(0,a.jsx)("div",{className:"flex flex-col h-full max-h-full",children:(0,a.jsx)("div",{className:"flex-1 relative overflow-hidden",children:(0,a.jsx)("div",{className:"w-full max-w-full relative h-full max-h-full",children:(0,a.jsx)(e6.t,{fallbackRender:()=>(0,a.jsx)(tp,{}),children:(0,a.jsx)(th,{ticker:s})})})})})}),(0,a.jsx)(td.X,{className:"my-10 border-transparent"}),(0,a.jsxs)(tv,{minSize:36,defaultSize:36,children:[(0,a.jsxs)("header",{className:"px-4 flex items-center justify-between gap-2 h-header-height h-full",children:[(0,a.jsx)("div",{className:"font-semibold select-none px-1",children:l("finance-tab-conversation-header","Finance Chat")}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(m.gx,{tooltipContent:l("New Chat","New Chat"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},variant:"ghost",size:"iconSm",disabled:!1,className:"rounded-full no-a11y-check text-secondary",children:(0,a.jsx)(I.cJ,{size:18})}),(0,a.jsx)(m.gx,{tooltipContent:l("Close Chat","Close Chat"),tooltipContentProps:{className:"text-xs"},tooltipProps:{delayDuration:300},variant:"ghost",size:"iconSm",className:"rounded-full no-a11y-check text-secondary",children:(0,a.jsx)(I.uv5,{size:18})})]})]}),(0,a.jsx)("section",{className:"flex-1 overflow-hidden [&_.chat-input-backdrop]:bg-background dark:[&_.chat-input-backdrop]:bg-surface-l1",children:(0,a.jsx)(sB.s,{asset:i})})]})]})}let tv=e=>{let{children:s,minSize:t,defaultSize:l}=e,i=(0,A.useRef)(!1);return(0,A.useEffect)(()=>{let e=setTimeout(()=>{i.current=!0},1e3);return()=>clearTimeout(e)},[]),(0,a.jsx)(e4.Zk,{order:2,minSize:t,defaultSize:l,className:(0,y.cn)("h-[100vh] right-0",i.current?"transition-all duration-300":void 0,"max-w-full w-full opacity-100"),children:(0,a.jsx)("div",{className:"dark:bg-surface-l1 bg-background h-full flex flex-col justify-between overflow-hidden border-l border-border-l1 flex-1",children:s})})};function tj(e){let{ticker:s}=e,{t}=(0,_.Bd)("base"),{user:l}=(0,ee.useSession)();return l?(0,a.jsx)("main",{className:(0,y.cn)("w-full relative flex flex-col items-center h-full w-full"),children:(0,a.jsx)(tg,{ticker:s})}):(0,a.jsx)("main",{className:(0,y.cn)("w-screen h-dvh relative"),children:(0,a.jsx)(Y.J,{title:t("Error","Error"),description:t("file-browser.error.anonymous-user","You must be logged in to access this page"),cta:t("Go Home","Go Home")})})}function tb(){(function(){let{route:e,push:s}=(0,b.wK)(),{user:t}=(0,ee.useSession)();(0,A.useEffect)(()=>i.aP.subscribe((a,l)=>{if(!a.conversationId||a.conversationId===l.conversationId||"chat"===e.page&&e.conversationId!==a.conversationId||"main"!==e.page)return;let i=e3.C$.getState().isIncognito||!t;s({page:"chat",conversationId:i?null:a.conversationId,temporary:i})}),[s,e,t])})(),function(){let{route:e}=(0,b.wK)();(0,A.useEffect)(()=>{let{conversationMode:s,voiceConnectionStatus:t,exitVoiceMode:a}=i.aP.getState();"voice"!==s||"disconnecting"===t||["main","chat"].includes(e.page)||a("navigation").catch(e=>(0,en.vV)("page:handleVoiceModeExit",e))},[e.page])}();let{SHOW_FINANCIAL_PAGE:e}=(0,h.h)(),{route:s}=(0,b.wK)();switch((0,A.useEffect)(()=>{let e=(0,b.KQ)(s,window.location.origin),t=document.querySelector("head link[rel='canonical']");return t||((t=document.createElement("link")).rel="canonical",document.head.appendChild(t)),t.href=e,()=>{let e=document.querySelector("head link[rel='canonical']");e&&document.head.removeChild(e)}},[s]),s.page){case"main":case"chat":return(0,a.jsx)(l.A,{});case"workspace":return(0,a.jsx)(to.w8,{workspaceId:s.workspaceId});case"workspaces":return(0,a.jsx)(to.TP,{});case"files":return(0,a.jsx)(tr,{});case"tasks":return(0,a.jsx)(B,{});case"images":case"unknown":default:return(0,a.jsx)(n.default,{});case"plans":return(0,a.jsx)(r.default,{});case"finance":if(e)return(0,a.jsx)(tj,{ticker:s.ticker});return(0,a.jsx)(n.default,{});case"faq":return(0,a.jsx)(H,{})}}},69473:(e,s,t)=>{"use strict";t.d(s,{H:()=>k});var a=t(79342),l=t(39489),i=t(72055),n=t(10084),r=t(56691),o=t(80226),d=t(75500),c=t(4878),u=t(12220),m=t(17703),f=t(6063),x=t(61312),h=t(13511),p=t(16506),g=t(88382),v=t(65146),j=t(14486),b=t(93192),y=t(6980),w=t(73508),N=t(56521);function k(e){let{fileMetadata:s,onClose:t,useRawFileURI:i,hideEdit:n,className:r}=e,o=(0,d.h)(),{ASSET_SERVER_URL:u}=(0,l.v)(),m=i?s.fileUri:(0,c.sU)(u,s.fileUri);if(o.ENABLE_CSV_RENDERING&&f.Ig.includes(s.fileMimeType)){let e=(0,x.cn)("flex flex-col items-center justify-center size-full mx-auto",r);return(0,a.jsx)(b.fE,{assetUrl:m,className:e})}if(o.ENABLE_XLSX_RENDERING&&f.f9.includes(s.fileMimeType)){let e=(0,x.cn)("flex flex-col items-center justify-center size-full mx-auto",r);return(0,a.jsx)(y.f,{assetUrl:m,fileMetadata:s,className:e})}if(s.fileMimeType.startsWith("text/"))return(0,a.jsx)(C,{assetUrl:m,fileMetadata:s,className:r});switch(s.fileMimeType){case"image/jpeg":case"image/png":case"image/webp":return(0,a.jsx)(I,{assetUrl:m,fileMetadata:s,onClose:t,hideEdit:n});case"application/json":case"application/csv":case"application/x-yaml":case"application/xml":case"application/toml":case"":return(0,a.jsx)(C,{className:r,assetUrl:m,fileMetadata:s});case"image/heic":case"image/heif":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-powerpoint":return(0,a.jsx)(S,{assetUrl:m,fileMetadata:s});default:return(0,a.jsx)(E,{assetUrl:m,fileMetadata:s})}}function I(e){let{assetUrl:s,fileMetadata:t,showControls:l=!1,onClose:d,hideEdit:c}=e,[f,x]=(0,g.useState)(!0),{t:h}=(0,v.Bd)("chat");(0,g.useEffect)(()=>{if(!s)return void x(!1);let e=new Image;return e.src=s,e.onload=()=>x(!1),e.onerror=()=>{var e;(e=s).startsWith("https://assets.grokusercontent.com/")&&(0,N.h)(e,{method:"GET",credentials:"include"}),x(!1)},()=>{e.onload=null,e.onerror=null}},[s]);let p=(0,g.useCallback)(()=>{s&&(0,u.G)(s,t.fileName).catch((0,m.HX)("chat-asset-viewer:handleDownloadImage"))},[s,t]);return l?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center w-full max-w-4xl mx-auto","data-vaul-no-drag":!0,children:(0,a.jsx)("div",{className:"relative w-full max-w-4xl mx-auto",children:(0,a.jsx)(j.GT,{initialScale:1,initialPositionX:0,initialPositionY:0,children:e=>{let{zoomIn:l,zoomOut:n,resetTransform:d}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"absolute end-4 bottom-4 z-10 flex space-x-1 rounded-full bg-background p-1 opacity-80",children:[(0,a.jsx)(r.$n,{onClick:()=>l(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Zoom In",children:(0,a.jsx)(i.$Zd,{className:"h-4 w-4"})}),(0,a.jsx)(r.$n,{onClick:()=>n(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Zoom Out",children:(0,a.jsx)(i.enP,{className:"h-4 w-4"})}),(0,a.jsx)(r.$n,{onClick:()=>d(),variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Reset Zoom",children:(0,a.jsx)(i.Hbd,{className:"h-4 w-4"})}),(0,a.jsx)(r.$n,{onClick:p,variant:"ghost",size:"iconSm",className:"text-primary hover:bg-foreground","aria-label":"Reset Zoom",children:(0,a.jsx)(i.s3U,{className:"h-4 w-4"})})]}),(0,a.jsx)(j.WZ,{wrapperClass:"!w-full bg-primary/50 rounded-lg",children:(0,a.jsx)("img",{src:s,alt:t.fileName,className:"w-full h-auto shadow-md",onLoad:()=>n(),style:{maxHeight:"70vh"}})}),f&&(0,a.jsx)(o.E,{className:"w-full h-[70vh] rounded-lg"})]})}})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:s,alt:t.fileName,className:"w-[94vw] max-h-[calc(100vh-10rem)] max-w-5xl xl:max-w-6xl shadow cursor-pointer rounded-xl lg:w-fit object-contain"}),s&&!c&&(0,a.jsx)("div",{className:"w-full flex justify-center absolute bottom-3 p-3",children:(0,a.jsxs)(n.R,{className:"px-4 py-3 h-auto",buttonProps:{variant:"card",size:"pill"},editingImage:{url:s,metadata:t},location:"chat-asset-viewer",onClick:e=>{e.stopPropagation(),d()},children:[(0,a.jsx)(i.mgJ,{className:"size-5 text-secondary"}),h("Edit Image","Edit Image")]})})]})}let C=g.memo(function(e){let{assetUrl:s,fileMetadata:t,className:l}=e,{t:i}=(0,v.Bd)("chat"),{resolvedTheme:n}=(0,p.D)(),{isLoading:r,error:o,data:d}=(0,h.IT)({queryKey:["text-asset",s],queryFn:async()=>{if(!s)throw Error("Asset URL is required");let e=await (0,N.h)(s,{method:"GET",credentials:"include"});if(!e.ok)throw Error("Failed to fetch: ".concat(e.statusText));return await e.text()},enabled:!!s});if(r)return(0,a.jsx)("div",{className:"p-4",children:i("Loading text…","Loading text…")});if(o)return(0,a.jsx)("div",{className:"p-4",children:i("errorMessage","Error: {{error}}",{error:o.message})});if(!d)return(0,a.jsx)("div",{className:"p-4 w-full h-full flex items-center justify-center text-secondary",children:i("Content is empty","Content is empty")});let c=d.length>16384,u=f.rU.includes(t.fileMimeType),m=c||u?(0,a.jsx)("pre",{className:(0,x.cn)("w-full p-4 rounded-lg shadow-md text-sm font-mono overflow-auto max-h-[50dvh] sm:max-h-[calc(100dvh-6rem)] mb-4 bg-foreground",l),children:d}):(0,a.jsx)("div",{className:(0,x.cn)("w-full rounded-lg shadow-md text-sm font-mono overflow-auto max-h-[50dvh] sm:max-h-[calc(100dvh-6rem)] mb-4",l),children:(0,a.jsx)(w.r,{customStyle:{background:"dark"===n?"#121314":"var(--foreground)",fontFamily:"var(--font-ibm-plex-mono)"},children:d})});return(0,a.jsx)("div",{className:(0,x.cn)("flex flex-col items-center justify-center w-full max-w-4xl mx-auto",l),children:m})});function S(e){let{assetUrl:s,fileMetadata:t}=e,{t:l}=(0,v.Bd)("chat");return s?(0,a.jsxs)("div",{className:"flex flex-col min-h-full w-full items-center justify-center rounded-2xl mb-4 gap-6 p-4",children:[(0,a.jsx)(i.dsF,{size:100,className:"text-muted"}),(0,a.jsx)("a",{href:s,download:t.fileName||"download",children:(0,a.jsx)(r.$n,{variant:"filledSecondary",rounded:!0,children:l("Download Asset","Download Asset")})})]}):null}function E(e){let{assetUrl:s,fileMetadata:t}=e,l=(0,g.useRef)(null);return(0,a.jsx)("div",{className:"flex flex-col items-center justify-center rounded-lg w-full h-full",children:(0,a.jsx)("iframe",{ref:l,src:s,title:t.fileName,className:"rounded-lg shadow-md h-full w-full"})})}C.displayName="MemoizedTextAssetViewer"},70154:(e,s,t)=>{Promise.resolve().then(t.bind(t,62085))},85255:(e,s,t)=>{"use strict";t.d(s,{H:()=>u});var a=t(42419),l=t(23232),i=t(52265),n=t(77232),r=t(87891),o=t(88382),d=t(65146),c=t(14908);let u=e=>{let{assetId:s,content:t,filename:u}=e,m=(0,l._)(),f=(0,r.R)(e=>e.shareAsset),x=(0,r.R)(e=>e.cloneAsset),[h,p]=(0,o.useState)(!1),[g,v]=(0,o.useState)(!1),[j,b]=(0,o.useState)(!1),{t:y}=(0,d.Bd)("files"),w=(0,o.useCallback)(async()=>{m("file_content_copy_click",void 0,{location:"files:useFileActions:handleCopy",contentType:"text/markdown"}),t&&(await (0,a.L)(t),setTimeout(()=>{p(!1)},1e3),p(!0),c.oR.success(y("files.content.copied","Copied")))},[t,m,y]),N=(0,o.useCallback)(()=>{m("file_content_download_click",void 0,{location:"files:useFileActions:handleDownload",contentType:"text/markdown"});let e=new Blob([t],{type:"text/markdown"});(0,i.W)(e,u)},[m,t,u]);return{handleCopy:w,copyPressed:h,handleDownload:N,handleShare:(0,o.useCallback)(async()=>{if(m("file_content_share_click",void 0,{location:"files:useFileActions:handleShare",contentType:"text/markdown"}),!s)return;v(!0);let e=!1;try{await f(s),e=!0}catch(e){c.oR.error(y("Failed to share file.","Failed to share file."))}finally{v(!1)}if(!e)return;setTimeout(()=>{b(!1)},1e3),b(!0);let t=window.location.origin+"/shared-file/"+s;(0,n.g)(t,y("Copied share link to clipboard.","Copied share link to clipboard."))},[m,s,f,y]),sharePressed:j,shareLoading:g,handleClone:(0,o.useCallback)(async()=>{if(m("file_content_clone_click",void 0,{location:"files:useFileActions:handleClone",contentType:"text/markdown"}),!s)return;let{assetId:e}=await x(s);e&&(window.location.href="/files/?file=".concat(e))},[m,s,x])}}},87549:(e,s,t)=>{"use strict";t.d(s,{B:()=>o});var a=t(79342),l=t(16538),i=t(34323),n=t(16506),r=t(88382);let o=e=>{let{syntax:s,value:t,isStreaming:o,editable:d,autofocus:c,onContentUpdate:u}=e,m=(0,r.useRef)(void 0),[f,x]=(0,r.useState)(!1),h=(0,r.useRef)(null),{resolvedTheme:p}=(0,n.D)();(0,r.useEffect)(()=>{(0,l.q)()},[]);let g=(0,r.useCallback)((e,s)=>{s.isFlush||u(e)},[u]),v=(0,r.useCallback)(e=>{h.current=e,x(!0)},[]);(0,r.useEffect)(()=>{let e=h.current;if(f&&e&&d&&c){var s,t;let a={lineNumber:1,column:(null!=(t=null==(s=e.getModel())?void 0:s.getLineLength(1))?t:0)+1};e.setPosition(a),e.focus()}},[f,c]),(0,r.useEffect)(()=>{let e=h.current;if(!e||!l.x||!o)return;let s=e.getValue(),a=e.getModel();if(!a)return;if(!t.includes(s))return void e.setValue(t);let i=t.substring(s.length),n=a.getPositionAt(s.length);e.executeEdits("stream-update",[{range:new l.x.Range(n.lineNumber,n.column,n.lineNumber,n.column),forceMoveMarkers:!0,text:i}])},[f,t,o]);let j=(0,r.useCallback)(()=>{m.current&&m.current();let e=null===l.x||void 0===l.x?void 0:l.x.editor.getEditors()[0];if(e){var s;let t=e.getSelection();if(!t)return;if(null==(s=e.getModel())?void 0:s.getValueInRange(t)){let s=document.createElement("div"),a={getId:()=>"selected-text.widget",getDomNode:()=>s,getPosition:()=>l.x?{position:{lineNumber:t.endLineNumber,column:t.startColumn},preference:[l.x.editor.ContentWidgetPositionPreference.BELOW,l.x.editor.ContentWidgetPositionPreference.ABOVE]}:{position:{lineNumber:t.endLineNumber,column:t.startColumn},preference:[]}};e.addContentWidget(a),m.current=()=>e.removeContentWidget(a)}}},[]),b=(0,r.useMemo)(()=>({contextmenu:!1,suggestOnTriggerCharacters:!1,acceptSuggestionOnEnter:"off",lineNumbers:"on",readOnly:!d,quickSuggestions:!1,fontFamily:"var(--font-ibm-plex-mono)",fontSize:14,stickyScroll:{enabled:!1},wordBasedSuggestions:"off",wordWrap:"on",automaticLayout:!0,parameterHints:{enabled:!1},hover:{enabled:!1},minimap:{enabled:!1},scrollbar:{useShadows:!1},scrollBeyondLastLine:!1,padding:{bottom:30}}),[d]),y=(0,r.useCallback)(e=>{e.languages.register({id:"latex"}),e.languages.setMonarchTokensProvider("latex",{tokenizer:{root:[[/[\\][a-zA-Z]+/,"keyword"],[/\$[^$]*\$/,"string"],[/\\[\(\[][^{}]*\\[\)\]]/,"string"],[/%.*$/,"comment"],[/[{}]/,"delimiter"],[/\\(begin|end)\{[a-zA-Z]*\}/,"keyword"],[/[\[\]()]/,"delimiter"]]}})},[]);return(0,a.jsx)("div",{className:"w-full h-full max-h-full",onMouseUp:j,children:(0,a.jsx)(i.Ay,{height:"100%",width:"100%",onMount:v,value:o?void 0:t,language:s,onChange:g,beforeMount:y,theme:"dark"===p?"dark":"light",options:b})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[85354,62254,51829,51335,64713,28422,94150,4684,55701,37866,97652,26294,77186,58895,18096,24657,95861,14790,45085,67303,66432,62231,53592,97240,33846,21572,9427,93038,35450,14486,98959,72055,20549,10953,38424,62388,3300,13504,98117,14987,47610,38063,77358],()=>s(70154)),_N_E=e.O()}]);